import{j as M,d as we,X as Jo,S as Oo,l as Zo,T as lo,f as Wo,g as Yo,r as pe,B as nt}from"./index-BmY_xerG.js";import{R as Ko,T as zo,C as Xo,a as Qo,b as jo,D as ei,P as ti,O as ni,c as oi,u as ii,F as ri}from"./index-BKZvfYaE.js";import{L as si,a as Ht}from"./Loading-c1DEV5sz.js";function ai({...o}){return M.jsx(Ko,{"data-slot":"sheet",...o})}function li({...o}){return M.jsx(zo,{"data-slot":"sheet-trigger",...o})}function ui({...o}){return M.jsx(ti,{"data-slot":"sheet-portal",...o})}function ci({className:o,...e}){return M.jsx(ni,{"data-slot":"sheet-overlay",className:we("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",o),...e})}function di({className:o,children:e,side:t="right",...n}){return M.jsxs(ui,{children:[M.jsx(ci,{}),M.jsxs(Xo,{"data-slot":"sheet-content",className:we("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",o),...n,children:[e,M.jsxs(Qo,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[M.jsx(Jo,{className:"size-4"}),M.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function fi({className:o,...e}){return M.jsx("div",{"data-slot":"sheet-header",className:we("flex flex-col gap-1.5 p-4",o),...e})}function pi({className:o,...e}){return M.jsx(jo,{"data-slot":"sheet-title",className:we("text-foreground font-semibold",o),...e})}function Jt({className:o,...e}){return M.jsx(ei,{"data-slot":"sheet-description",className:we("text-muted-foreground text-sm",o),...e})}const mi=Zo("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function vt({className:o,variant:e,asChild:t=!1,...n}){const i=t?Oo:"span";return M.jsx(i,{"data-slot":"badge",className:we(mi({variant:e}),o),...n})}var U;(function(o){o.assertEqual=i=>i;function e(i){}o.assertIs=e;function t(i){throw new Error}o.assertNever=t,o.arrayToEnum=i=>{const a={};for(const l of i)a[l]=l;return a},o.getValidEnumValues=i=>{const a=o.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of a)l[u]=i[u];return o.objectValues(l)},o.objectValues=i=>o.objectKeys(i).map(function(a){return i[a]}),o.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},o.find=(i,a)=>{for(const l of i)if(a(l))return l},o.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}o.joinValues=n,o.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(U||(U={}));var _t;(function(o){o.mergeShapes=(e,t)=>({...e,...t})})(_t||(_t={}));const C=U.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),re=o=>{switch(typeof o){case"undefined":return C.undefined;case"string":return C.string;case"number":return isNaN(o)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":return Array.isArray(o)?C.array:o===null?C.null:o.then&&typeof o.then=="function"&&o.catch&&typeof o.catch=="function"?C.promise:typeof Map<"u"&&o instanceof Map?C.map:typeof Set<"u"&&o instanceof Set?C.set:typeof Date<"u"&&o instanceof Date?C.date:C.object;default:return C.unknown}},v=U.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),hi=o=>JSON.stringify(o,null,2).replace(/"([^"]+)":/g,"$1:");class Y extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(t(l));else{let u=n,d=0;for(;d<l.path.length;){const c=l.path[d];d===l.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(t(l))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return i(this),n}static assert(e){if(!(e instanceof Y))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,U.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Y.create=o=>new Y(o);const xe=(o,e)=>{let t;switch(o.code){case v.invalid_type:o.received===C.undefined?t="Required":t=`Expected ${o.expected}, received ${o.received}`;break;case v.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(o.expected,U.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:t=`Unrecognized key(s) in object: ${U.joinValues(o.keys,", ")}`;break;case v.invalid_union:t="Invalid input";break;case v.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${U.joinValues(o.options)}`;break;case v.invalid_enum_value:t=`Invalid enum value. Expected ${U.joinValues(o.options)}, received '${o.received}'`;break;case v.invalid_arguments:t="Invalid function arguments";break;case v.invalid_return_type:t="Invalid function return type";break;case v.invalid_date:t="Invalid date";break;case v.invalid_string:typeof o.validation=="object"?"includes"in o.validation?(t=`Invalid input: must include "${o.validation.includes}"`,typeof o.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${o.validation.position}`)):"startsWith"in o.validation?t=`Invalid input: must start with "${o.validation.startsWith}"`:"endsWith"in o.validation?t=`Invalid input: must end with "${o.validation.endsWith}"`:U.assertNever(o.validation):o.validation!=="regex"?t=`Invalid ${o.validation}`:t="Invalid";break;case v.too_small:o.type==="array"?t=`Array must contain ${o.exact?"exactly":o.inclusive?"at least":"more than"} ${o.minimum} element(s)`:o.type==="string"?t=`String must contain ${o.exact?"exactly":o.inclusive?"at least":"over"} ${o.minimum} character(s)`:o.type==="number"?t=`Number must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${o.minimum}`:o.type==="date"?t=`Date must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(o.minimum))}`:t="Invalid input";break;case v.too_big:o.type==="array"?t=`Array must contain ${o.exact?"exactly":o.inclusive?"at most":"less than"} ${o.maximum} element(s)`:o.type==="string"?t=`String must contain ${o.exact?"exactly":o.inclusive?"at most":"under"} ${o.maximum} character(s)`:o.type==="number"?t=`Number must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="bigint"?t=`BigInt must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="date"?t=`Date must be ${o.exact?"exactly":o.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(o.maximum))}`:t="Invalid input";break;case v.custom:t="Invalid input";break;case v.invalid_intersection_types:t="Intersection results could not be merged";break;case v.not_multiple_of:t=`Number must be a multiple of ${o.multipleOf}`;break;case v.not_finite:t="Number must be finite";break;default:t=e.defaultError,U.assertNever(o)}return{message:t}};let uo=xe;function gi(o){uo=o}function ot(){return uo}const it=o=>{const{data:e,path:t,errorMaps:n,issueData:i}=o,a=[...t,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const d=n.filter(c=>!!c).slice().reverse();for(const c of d)u=c(l,{data:e,defaultError:u}).message;return{...i,path:a,message:u}},yi=[];function T(o,e){const t=ot(),n=it({issueData:e,data:o.data,path:o.path,errorMaps:[o.common.contextualErrorMap,o.schemaErrorMap,t,t===xe?void 0:xe].filter(i=>!!i)});o.common.issues.push(n)}class J{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if(i.status==="aborted")return w;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const i of t){const a=await i.key,l=await i.value;n.push({key:a,value:l})}return J.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return w;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(n[a.value]=l.value)}return{status:e.value,value:n}}}const w=Object.freeze({status:"aborted"}),Te=o=>({status:"dirty",value:o}),Z=o=>({status:"valid",value:o}),Et=o=>o.status==="aborted",St=o=>o.status==="dirty",he=o=>o.status==="valid",Le=o=>typeof Promise<"u"&&o instanceof Promise;function rt(o,e,t,n){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(o)}function co(o,e,t,n,i){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(o,t),t}var S;(function(o){o.errToObj=e=>typeof e=="string"?{message:e}:e||{},o.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(S||(S={}));var ke,De;class te{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ot=(o,e)=>{if(he(e))return{success:!0,data:e.value};if(!o.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Y(o.common.issues);return this._error=t,this._error}}};function N(o){if(!o)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:i}=o;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{var d,c;const{message:f}=o;return l.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:(d=f??n)!==null&&d!==void 0?d:u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:(c=f??t)!==null&&c!==void 0?c:u.defaultError}},description:i}}class k{get description(){return this._def.description}_getType(e){return re(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:re(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new J,ctx:{common:e.parent.common,data:e.data,parsedType:re(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Le(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const i={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:re(e)},a=this._parseSync({data:e,path:i.path,parent:i});return Ot(i,a)}"~validate"(e){var t,n;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:re(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:i});return he(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((n=(t=a==null?void 0:a.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(a=>he(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:re(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(Le(i)?i:Promise.resolve(i));return Ot(n,a)}refine(e,t){const n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,a)=>{const l=e(i),u=()=>a.addIssue({code:v.custom,...n(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new j({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ee.create(this,this._def)}nullable(){return ce.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return X.create(this)}promise(){return Ie.create(this,this._def)}or(e){return be.create([this,e],this._def)}and(e){return qe.create(this,e,this._def)}transform(e){return new j({...N(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Oe({...N(this._def),innerType:this,defaultValue:t,typeName:A.ZodDefault})}brand(){return new Lt({typeName:A.ZodBranded,type:this,...N(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ze({...N(this._def),innerType:this,catchValue:t,typeName:A.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ye.create(this,e)}readonly(){return We.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vi=/^c[^\s-]{8,}$/i,Ti=/^[0-9a-z]+$/,Ci=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_i=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ei=/^[a-z0-9_-]{21}$/i,Si=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,xi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ai=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ii="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Tt;const Mi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ri=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Pi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ni=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ki=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Di=new RegExp(`^${fo}$`);function po(o){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return o.precision?e=`${e}\\.\\d{${o.precision}}`:o.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Vi(o){return new RegExp(`^${po(o)}$`)}function mo(o){let e=`${fo}T${po(o)}`;const t=[];return t.push(o.local?"Z?":"Z"),o.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Li(o,e){return!!((e==="v4"||!e)&&Mi.test(o)||(e==="v6"||!e)&&Ri.test(o))}function Fi(o,e){if(!Si.test(o))return!1;try{const[t]=o.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function Ui(o,e){return!!((e==="v4"||!e)&&wi.test(o)||(e==="v6"||!e)&&Pi.test(o))}class z extends k{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==C.string){const a=this._getOrReturnCtx(e);return T(a,{code:v.invalid_type,expected:C.string,received:a.parsedType}),w}const n=new J;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),T(i,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),T(i,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?T(i,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&T(i,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Ai.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"email",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Tt||(Tt=new RegExp(Ii,"u")),Tt.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"emoji",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")_i.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"uuid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Ei.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"nanoid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")vi.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"cuid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Ti.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"cuid2",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Ci.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"ulid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),T(i,{validation:"url",code:v.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"regex",code:v.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),T(i,{code:v.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),T(i,{code:v.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),T(i,{code:v.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?mo(a).test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{code:v.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?Di.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{code:v.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?Vi(a).test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{code:v.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?xi.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"duration",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?Li(e.data,a.version)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"ip",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?Fi(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"jwt",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?Ui(e.data,a.version)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"cidr",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Ni.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"base64",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?ki.test(e.data)||(i=this._getOrReturnCtx(e,i),T(i,{validation:"base64url",code:v.invalid_string,message:a.message}),n.dirty()):U.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:v.invalid_string,...S.errToObj(n)})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...S.errToObj(e)})}url(e){return this._addCheck({kind:"url",...S.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...S.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...S.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...S.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...S.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...S.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...S.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...S.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...S.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...S.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...S.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...S.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...S.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...S.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...S.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...S.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...S.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...S.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...S.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...S.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...S.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...S.errToObj(t)})}nonempty(e){return this.min(1,S.errToObj(e))}trim(){return new z({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new z({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new z({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}z.create=o=>{var e;return new z({checks:[],typeName:A.ZodString,coerce:(e=o==null?void 0:o.coerce)!==null&&e!==void 0?e:!1,...N(o)})};function Gi(o,e){const t=(o.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,a=parseInt(o.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return a%l/Math.pow(10,i)}class ae extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==C.number){const a=this._getOrReturnCtx(e);return T(a,{code:v.invalid_type,expected:C.number,received:a.parsedType}),w}let n;const i=new J;for(const a of this._def.checks)a.kind==="int"?U.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{code:v.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:v.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:v.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Gi(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),T(n,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{code:v.not_finite,message:a.message}),i.dirty()):U.assertNever(a);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,S.toString(t))}gt(e,t){return this.setLimit("min",e,!1,S.toString(t))}lte(e,t){return this.setLimit("max",e,!0,S.toString(t))}lt(e,t){return this.setLimit("max",e,!1,S.toString(t))}setLimit(e,t,n,i){return new ae({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:S.toString(i)}]})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:S.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:S.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:S.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:S.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:S.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&U.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ae.create=o=>new ae({checks:[],typeName:A.ZodNumber,coerce:(o==null?void 0:o.coerce)||!1,...N(o)});class le extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==C.bigint)return this._getInvalidInput(e);let n;const i=new J;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:v.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:v.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),T(n,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):U.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return T(t,{code:v.invalid_type,expected:C.bigint,received:t.parsedType}),w}gte(e,t){return this.setLimit("min",e,!0,S.toString(t))}gt(e,t){return this.setLimit("min",e,!1,S.toString(t))}lte(e,t){return this.setLimit("max",e,!0,S.toString(t))}lt(e,t){return this.setLimit("max",e,!1,S.toString(t))}setLimit(e,t,n,i){return new le({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:S.toString(i)}]})}_addCheck(e){return new le({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:S.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}le.create=o=>{var e;return new le({checks:[],typeName:A.ZodBigInt,coerce:(e=o==null?void 0:o.coerce)!==null&&e!==void 0?e:!1,...N(o)})};class Fe extends k{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==C.boolean){const n=this._getOrReturnCtx(e);return T(n,{code:v.invalid_type,expected:C.boolean,received:n.parsedType}),w}return Z(e.data)}}Fe.create=o=>new Fe({typeName:A.ZodBoolean,coerce:(o==null?void 0:o.coerce)||!1,...N(o)});class ge extends k{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==C.date){const a=this._getOrReturnCtx(e);return T(a,{code:v.invalid_type,expected:C.date,received:a.parsedType}),w}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return T(a,{code:v.invalid_date}),w}const n=new J;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),T(i,{code:v.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),T(i,{code:v.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):U.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ge({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:S.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:S.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ge.create=o=>new ge({checks:[],coerce:(o==null?void 0:o.coerce)||!1,typeName:A.ZodDate,...N(o)});class st extends k{_parse(e){if(this._getType(e)!==C.symbol){const n=this._getOrReturnCtx(e);return T(n,{code:v.invalid_type,expected:C.symbol,received:n.parsedType}),w}return Z(e.data)}}st.create=o=>new st({typeName:A.ZodSymbol,...N(o)});class Ue extends k{_parse(e){if(this._getType(e)!==C.undefined){const n=this._getOrReturnCtx(e);return T(n,{code:v.invalid_type,expected:C.undefined,received:n.parsedType}),w}return Z(e.data)}}Ue.create=o=>new Ue({typeName:A.ZodUndefined,...N(o)});class Ge extends k{_parse(e){if(this._getType(e)!==C.null){const n=this._getOrReturnCtx(e);return T(n,{code:v.invalid_type,expected:C.null,received:n.parsedType}),w}return Z(e.data)}}Ge.create=o=>new Ge({typeName:A.ZodNull,...N(o)});class Ae extends k{constructor(){super(...arguments),this._any=!0}_parse(e){return Z(e.data)}}Ae.create=o=>new Ae({typeName:A.ZodAny,...N(o)});class me extends k{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Z(e.data)}}me.create=o=>new me({typeName:A.ZodUnknown,...N(o)});class se extends k{_parse(e){const t=this._getOrReturnCtx(e);return T(t,{code:v.invalid_type,expected:C.never,received:t.parsedType}),w}}se.create=o=>new se({typeName:A.ZodNever,...N(o)});class at extends k{_parse(e){if(this._getType(e)!==C.undefined){const n=this._getOrReturnCtx(e);return T(n,{code:v.invalid_type,expected:C.void,received:n.parsedType}),w}return Z(e.data)}}at.create=o=>new at({typeName:A.ZodVoid,...N(o)});class X extends k{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==C.array)return T(t,{code:v.invalid_type,expected:C.array,received:t.parsedType}),w;if(i.exactLength!==null){const l=t.data.length>i.exactLength.value,u=t.data.length<i.exactLength.value;(l||u)&&(T(t,{code:l?v.too_big:v.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(T(t,{code:v.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(T(t,{code:v.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((l,u)=>i.type._parseAsync(new te(t,l,t.path,u)))).then(l=>J.mergeArray(n,l));const a=[...t.data].map((l,u)=>i.type._parseSync(new te(t,l,t.path,u)));return J.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new X({...this._def,minLength:{value:e,message:S.toString(t)}})}max(e,t){return new X({...this._def,maxLength:{value:e,message:S.toString(t)}})}length(e,t){return new X({...this._def,exactLength:{value:e,message:S.toString(t)}})}nonempty(e){return this.min(1,e)}}X.create=(o,e)=>new X({type:o,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...N(e)});function ve(o){if(o instanceof $){const e={};for(const t in o.shape){const n=o.shape[t];e[t]=ee.create(ve(n))}return new $({...o._def,shape:()=>e})}else return o instanceof X?new X({...o._def,type:ve(o.element)}):o instanceof ee?ee.create(ve(o.unwrap())):o instanceof ce?ce.create(ve(o.unwrap())):o instanceof ne?ne.create(o.items.map(e=>ve(e))):o}class $ extends k{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=U.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==C.object){const c=this._getOrReturnCtx(e);return T(c,{code:v.invalid_type,expected:C.object,received:c.parsedType}),w}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof se&&this._def.unknownKeys==="strip"))for(const c in i.data)l.includes(c)||u.push(c);const d=[];for(const c of l){const f=a[c],p=i.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new te(i,p,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof se){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(c==="strict")u.length>0&&(T(i,{code:v.unrecognized_keys,keys:u}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const p=i.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new te(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of d){const p=await f.key,m=await f.value;c.push({key:p,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>J.mergeObjectSync(n,c)):J.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return S.errToObj,new $({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,a,l,u;const d=(l=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,t,n).message)!==null&&l!==void 0?l:n.defaultError;return t.code==="unrecognized_keys"?{message:(u=S.errToObj(e).message)!==null&&u!==void 0?u:d}:{message:d}}}:{}})}strip(){return new $({...this._def,unknownKeys:"strip"})}passthrough(){return new $({...this._def,unknownKeys:"passthrough"})}extend(e){return new $({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:A.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new $({...this._def,catchall:e})}pick(e){const t={};return U.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new $({...this._def,shape:()=>t})}omit(e){const t={};return U.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new $({...this._def,shape:()=>t})}deepPartial(){return ve(this)}partial(e){const t={};return U.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}),new $({...this._def,shape:()=>t})}required(e){const t={};return U.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ee;)a=a._def.innerType;t[n]=a}}),new $({...this._def,shape:()=>t})}keyof(){return ho(U.objectKeys(this.shape))}}$.create=(o,e)=>new $({shape:()=>o,unknownKeys:"strip",catchall:se.create(),typeName:A.ZodObject,...N(e)});$.strictCreate=(o,e)=>new $({shape:()=>o,unknownKeys:"strict",catchall:se.create(),typeName:A.ZodObject,...N(e)});$.lazycreate=(o,e)=>new $({shape:o,unknownKeys:"strip",catchall:se.create(),typeName:A.ZodObject,...N(e)});class be extends k{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new Y(u.ctx.common.issues));return T(t,{code:v.invalid_union,unionErrors:l}),w}if(t.common.async)return Promise.all(n.map(async a=>{const l={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(i);{let a;const l=[];for(const d of n){const c={...t,common:{...t.common,issues:[]},parent:null},f=d._parseSync({data:t.data,path:t.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:c}),c.common.issues.length&&l.push(c.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(d=>new Y(d));return T(t,{code:v.invalid_union,unionErrors:u}),w}}get options(){return this._def.options}}be.create=(o,e)=>new be({options:o,typeName:A.ZodUnion,...N(e)});const ie=o=>o instanceof $e?ie(o.schema):o instanceof j?ie(o.innerType()):o instanceof He?[o.value]:o instanceof ue?o.options:o instanceof Je?U.objectValues(o.enum):o instanceof Oe?ie(o._def.innerType):o instanceof Ue?[void 0]:o instanceof Ge?[null]:o instanceof ee?[void 0,...ie(o.unwrap())]:o instanceof ce?[null,...ie(o.unwrap())]:o instanceof Lt||o instanceof We?ie(o.unwrap()):o instanceof Ze?ie(o._def.innerType):[];class pt extends k{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.object)return T(t,{code:v.invalid_type,expected:C.object,received:t.parsedType}),w;const n=this.discriminator,i=t.data[n],a=this.optionsMap.get(i);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(T(t,{code:v.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),w)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const i=new Map;for(const a of t){const l=ie(a.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of l){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,a)}}return new pt({typeName:A.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...N(n)})}}function xt(o,e){const t=re(o),n=re(e);if(o===e)return{valid:!0,data:o};if(t===C.object&&n===C.object){const i=U.objectKeys(e),a=U.objectKeys(o).filter(u=>i.indexOf(u)!==-1),l={...o,...e};for(const u of a){const d=xt(o[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(t===C.array&&n===C.array){if(o.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<o.length;a++){const l=o[a],u=e[a],d=xt(l,u);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return t===C.date&&n===C.date&&+o==+e?{valid:!0,data:o}:{valid:!1}}class qe extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(a,l)=>{if(Et(a)||Et(l))return w;const u=xt(a.value,l.value);return u.valid?((St(a)||St(l))&&t.dirty(),{status:t.value,value:u.data}):(T(n,{code:v.invalid_intersection_types}),w)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}qe.create=(o,e,t)=>new qe({left:o,right:e,typeName:A.ZodIntersection,...N(t)});class ne extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==C.array)return T(n,{code:v.invalid_type,expected:C.array,received:n.parsedType}),w;if(n.data.length<this._def.items.length)return T(n,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),w;!this._def.rest&&n.data.length>this._def.items.length&&(T(n,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new te(n,l,n.path,u)):null}).filter(l=>!!l);return n.common.async?Promise.all(a).then(l=>J.mergeArray(t,l)):J.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new ne({...this._def,rest:e})}}ne.create=(o,e)=>{if(!Array.isArray(o))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ne({items:o,typeName:A.ZodTuple,rest:null,...N(e)})};class Be extends k{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==C.object)return T(n,{code:v.invalid_type,expected:C.object,received:n.parsedType}),w;const i=[],a=this._def.keyType,l=this._def.valueType;for(const u in n.data)i.push({key:a._parse(new te(n,u,n.path,u)),value:l._parse(new te(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?J.mergeObjectAsync(t,i):J.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof k?new Be({keyType:e,valueType:t,typeName:A.ZodRecord,...N(n)}):new Be({keyType:z.create(),valueType:e,typeName:A.ZodRecord,...N(t)})}}class lt extends k{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==C.map)return T(n,{code:v.invalid_type,expected:C.map,received:n.parsedType}),w;const i=this._def.keyType,a=this._def.valueType,l=[...n.data.entries()].map(([u,d],c)=>({key:i._parse(new te(n,u,n.path,[c,"key"])),value:a._parse(new te(n,d,n.path,[c,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const c=await d.key,f=await d.value;if(c.status==="aborted"||f.status==="aborted")return w;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),u.set(c.value,f.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const d of l){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return w;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),u.set(c.value,f.value)}return{status:t.value,value:u}}}}lt.create=(o,e,t)=>new lt({valueType:e,keyType:o,typeName:A.ZodMap,...N(t)});class ye extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==C.set)return T(n,{code:v.invalid_type,expected:C.set,received:n.parsedType}),w;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(T(n,{code:v.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(T(n,{code:v.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const a=this._def.valueType;function l(d){const c=new Set;for(const f of d){if(f.status==="aborted")return w;f.status==="dirty"&&t.dirty(),c.add(f.value)}return{status:t.value,value:c}}const u=[...n.data.values()].map((d,c)=>a._parse(new te(n,d,n.path,c)));return n.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,t){return new ye({...this._def,minSize:{value:e,message:S.toString(t)}})}max(e,t){return new ye({...this._def,maxSize:{value:e,message:S.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ye.create=(o,e)=>new ye({valueType:o,minSize:null,maxSize:null,typeName:A.ZodSet,...N(e)});class _e extends k{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.function)return T(t,{code:v.invalid_type,expected:C.function,received:t.parsedType}),w;function n(u,d){return it({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ot(),xe].filter(c=>!!c),issueData:{code:v.invalid_arguments,argumentsError:d}})}function i(u,d){return it({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ot(),xe].filter(c=>!!c),issueData:{code:v.invalid_return_type,returnTypeError:d}})}const a={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof Ie){const u=this;return Z(async function(...d){const c=new Y([]),f=await u._def.args.parseAsync(d,a).catch(h=>{throw c.addIssue(n(d,h)),c}),p=await Reflect.apply(l,this,f);return await u._def.returns._def.type.parseAsync(p,a).catch(h=>{throw c.addIssue(i(p,h)),c})})}else{const u=this;return Z(function(...d){const c=u._def.args.safeParse(d,a);if(!c.success)throw new Y([n(d,c.error)]);const f=Reflect.apply(l,this,c.data),p=u._def.returns.safeParse(f,a);if(!p.success)throw new Y([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _e({...this._def,args:ne.create(e).rest(me.create())})}returns(e){return new _e({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new _e({args:e||ne.create([]).rest(me.create()),returns:t||me.create(),typeName:A.ZodFunction,...N(n)})}}class $e extends k{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}$e.create=(o,e)=>new $e({getter:o,typeName:A.ZodLazy,...N(e)});class He extends k{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return T(t,{received:t.data,code:v.invalid_literal,expected:this._def.value}),w}return{status:"valid",value:e.data}}get value(){return this._def.value}}He.create=(o,e)=>new He({value:o,typeName:A.ZodLiteral,...N(e)});function ho(o,e){return new ue({values:o,typeName:A.ZodEnum,...N(e)})}class ue extends k{constructor(){super(...arguments),ke.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return T(t,{expected:U.joinValues(n),received:t.parsedType,code:v.invalid_type}),w}if(rt(this,ke)||co(this,ke,new Set(this._def.values)),!rt(this,ke).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return T(t,{received:t.data,code:v.invalid_enum_value,options:n}),w}return Z(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ue.create(e,{...this._def,...t})}exclude(e,t=this._def){return ue.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}ke=new WeakMap;ue.create=ho;class Je extends k{constructor(){super(...arguments),De.set(this,void 0)}_parse(e){const t=U.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==C.string&&n.parsedType!==C.number){const i=U.objectValues(t);return T(n,{expected:U.joinValues(i),received:n.parsedType,code:v.invalid_type}),w}if(rt(this,De)||co(this,De,new Set(U.getValidEnumValues(this._def.values))),!rt(this,De).has(e.data)){const i=U.objectValues(t);return T(n,{received:n.data,code:v.invalid_enum_value,options:i}),w}return Z(e.data)}get enum(){return this._def.values}}De=new WeakMap;Je.create=(o,e)=>new Je({values:o,typeName:A.ZodNativeEnum,...N(e)});class Ie extends k{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.promise&&t.common.async===!1)return T(t,{code:v.invalid_type,expected:C.promise,received:t.parsedType}),w;const n=t.parsedType===C.promise?t.data:Promise.resolve(t.data);return Z(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ie.create=(o,e)=>new Ie({type:o,typeName:A.ZodPromise,...N(e)});class j extends k{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{T(n,l),l.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const l=i.transform(n.data,a);if(n.common.async)return Promise.resolve(l).then(async u=>{if(t.value==="aborted")return w;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?w:d.status==="dirty"||t.value==="dirty"?Te(d.value):d});{if(t.value==="aborted")return w;const u=this._def.schema._parseSync({data:l,path:n.path,parent:n});return u.status==="aborted"?w:u.status==="dirty"||t.value==="dirty"?Te(u.value):u}}if(i.type==="refinement"){const l=u=>{const d=i.refinement(u,a);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?w:(u.status==="dirty"&&t.dirty(),l(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?w:(u.status==="dirty"&&t.dirty(),l(u.value).then(()=>({status:t.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!he(l))return l;const u=i.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>he(l)?Promise.resolve(i.transform(l.value,a)).then(u=>({status:t.value,value:u})):l);U.assertNever(i)}}j.create=(o,e,t)=>new j({schema:o,typeName:A.ZodEffects,effect:e,...N(t)});j.createWithPreprocess=(o,e,t)=>new j({schema:e,effect:{type:"preprocess",transform:o},typeName:A.ZodEffects,...N(t)});class ee extends k{_parse(e){return this._getType(e)===C.undefined?Z(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ee.create=(o,e)=>new ee({innerType:o,typeName:A.ZodOptional,...N(e)});class ce extends k{_parse(e){return this._getType(e)===C.null?Z(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ce.create=(o,e)=>new ce({innerType:o,typeName:A.ZodNullable,...N(e)});class Oe extends k{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===C.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Oe.create=(o,e)=>new Oe({innerType:o,typeName:A.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...N(e)});class Ze extends k{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Le(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Y(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Y(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ze.create=(o,e)=>new Ze({innerType:o,typeName:A.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...N(e)});class ut extends k{_parse(e){if(this._getType(e)!==C.nan){const n=this._getOrReturnCtx(e);return T(n,{code:v.invalid_type,expected:C.nan,received:n.parsedType}),w}return{status:"valid",value:e.data}}}ut.create=o=>new ut({typeName:A.ZodNaN,...N(o)});const bi=Symbol("zod_brand");class Lt extends k{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ye extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?w:a.status==="dirty"?(t.dirty(),Te(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?w:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new Ye({in:e,out:t,typeName:A.ZodPipeline})}}class We extends k{_parse(e){const t=this._def.innerType._parse(e),n=i=>(he(i)&&(i.value=Object.freeze(i.value)),i);return Le(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}}We.create=(o,e)=>new We({innerType:o,typeName:A.ZodReadonly,...N(e)});function Zt(o,e){const t=typeof o=="function"?o(e):typeof o=="string"?{message:o}:o;return typeof t=="string"?{message:t}:t}function go(o,e={},t){return o?Ae.create().superRefine((n,i)=>{var a,l;const u=o(n);if(u instanceof Promise)return u.then(d=>{var c,f;if(!d){const p=Zt(e,n),m=(f=(c=p.fatal)!==null&&c!==void 0?c:t)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!u){const d=Zt(e,n),c=(l=(a=d.fatal)!==null&&a!==void 0?a:t)!==null&&l!==void 0?l:!0;i.addIssue({code:"custom",...d,fatal:c})}}):Ae.create()}const qi={object:$.lazycreate};var A;(function(o){o.ZodString="ZodString",o.ZodNumber="ZodNumber",o.ZodNaN="ZodNaN",o.ZodBigInt="ZodBigInt",o.ZodBoolean="ZodBoolean",o.ZodDate="ZodDate",o.ZodSymbol="ZodSymbol",o.ZodUndefined="ZodUndefined",o.ZodNull="ZodNull",o.ZodAny="ZodAny",o.ZodUnknown="ZodUnknown",o.ZodNever="ZodNever",o.ZodVoid="ZodVoid",o.ZodArray="ZodArray",o.ZodObject="ZodObject",o.ZodUnion="ZodUnion",o.ZodDiscriminatedUnion="ZodDiscriminatedUnion",o.ZodIntersection="ZodIntersection",o.ZodTuple="ZodTuple",o.ZodRecord="ZodRecord",o.ZodMap="ZodMap",o.ZodSet="ZodSet",o.ZodFunction="ZodFunction",o.ZodLazy="ZodLazy",o.ZodLiteral="ZodLiteral",o.ZodEnum="ZodEnum",o.ZodEffects="ZodEffects",o.ZodNativeEnum="ZodNativeEnum",o.ZodOptional="ZodOptional",o.ZodNullable="ZodNullable",o.ZodDefault="ZodDefault",o.ZodCatch="ZodCatch",o.ZodPromise="ZodPromise",o.ZodBranded="ZodBranded",o.ZodPipeline="ZodPipeline",o.ZodReadonly="ZodReadonly"})(A||(A={}));const Bi=(o,e={message:`Input not instance of ${o.name}`})=>go(t=>t instanceof o,e),yo=z.create,vo=ae.create,$i=ut.create,Hi=le.create,To=Fe.create,Ji=ge.create,Oi=st.create,Zi=Ue.create,Wi=Ge.create,Yi=Ae.create,Ki=me.create,zi=se.create,Xi=at.create,Qi=X.create,ji=$.create,er=$.strictCreate,tr=be.create,nr=pt.create,or=qe.create,ir=ne.create,rr=Be.create,sr=lt.create,ar=ye.create,lr=_e.create,ur=$e.create,cr=He.create,dr=ue.create,fr=Je.create,pr=Ie.create,Wt=j.create,mr=ee.create,hr=ce.create,gr=j.createWithPreprocess,yr=Ye.create,vr=()=>yo().optional(),Tr=()=>vo().optional(),Cr=()=>To().optional(),_r={string:o=>z.create({...o,coerce:!0}),number:o=>ae.create({...o,coerce:!0}),boolean:o=>Fe.create({...o,coerce:!0}),bigint:o=>le.create({...o,coerce:!0}),date:o=>ge.create({...o,coerce:!0})},Er=w;var b=Object.freeze({__proto__:null,defaultErrorMap:xe,setErrorMap:gi,getErrorMap:ot,makeIssue:it,EMPTY_PATH:yi,addIssueToContext:T,ParseStatus:J,INVALID:w,DIRTY:Te,OK:Z,isAborted:Et,isDirty:St,isValid:he,isAsync:Le,get util(){return U},get objectUtil(){return _t},ZodParsedType:C,getParsedType:re,ZodType:k,datetimeRegex:mo,ZodString:z,ZodNumber:ae,ZodBigInt:le,ZodBoolean:Fe,ZodDate:ge,ZodSymbol:st,ZodUndefined:Ue,ZodNull:Ge,ZodAny:Ae,ZodUnknown:me,ZodNever:se,ZodVoid:at,ZodArray:X,ZodObject:$,ZodUnion:be,ZodDiscriminatedUnion:pt,ZodIntersection:qe,ZodTuple:ne,ZodRecord:Be,ZodMap:lt,ZodSet:ye,ZodFunction:_e,ZodLazy:$e,ZodLiteral:He,ZodEnum:ue,ZodNativeEnum:Je,ZodPromise:Ie,ZodEffects:j,ZodTransformer:j,ZodOptional:ee,ZodNullable:ce,ZodDefault:Oe,ZodCatch:Ze,ZodNaN:ut,BRAND:bi,ZodBranded:Lt,ZodPipeline:Ye,ZodReadonly:We,custom:go,Schema:k,ZodSchema:k,late:qi,get ZodFirstPartyTypeKind(){return A},coerce:_r,any:Yi,array:Qi,bigint:Hi,boolean:To,date:Ji,discriminatedUnion:nr,effect:Wt,enum:dr,function:lr,instanceof:Bi,intersection:or,lazy:ur,literal:cr,map:sr,nan:$i,nativeEnum:fr,never:zi,null:Wi,nullable:hr,number:vo,object:ji,oboolean:Cr,onumber:Tr,optional:mr,ostring:vr,pipeline:yr,preprocess:gr,promise:pr,record:rr,set:ar,strictObject:er,string:yo,symbol:Oi,transformer:Wt,tuple:ir,undefined:Zi,union:tr,unknown:Ki,void:Xi,NEVER:Er,ZodIssueCode:v,quotelessJson:hi,ZodError:Y});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Sr,xr;function Ar(){return{geminiUrl:Sr,vertexUrl:xr}}function Ir(o,e,t){var n,i,a;if(!(!((n=o.httpOptions)===null||n===void 0)&&n.baseUrl)){const l=Ar();return o.vertexai?(i=l.vertexUrl)!==null&&i!==void 0?i:e:(a=l.geminiUrl)!==null&&a!==void 0?a:t}return o.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Re{}function I(o,e){const t=/\{([^}]+)\}/g;return o.replace(t,(n,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function s(o,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in o))if(Array.isArray(t))o[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(o[u])){const d=o[u];if(Array.isArray(t))for(let c=0;c<d.length;c++){const f=d[c];s(f,e.slice(a+1),t[c])}else for(const c of d)s(c,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in o||(o[u]=[{}]);const d=o[u];s(d[0],e.slice(a+1),t);return}(!o[l]||typeof o[l]!="object")&&(o[l]={}),o=o[l]}const n=e[e.length-1],i=o[n];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else o[n]=t}function r(o,e){try{if(e.length===1&&e[0]==="_self")return o;for(let t=0;t<e.length;t++){if(typeof o!="object"||o===null)return;const n=e[t];if(n.endsWith("[]")){const i=n.slice(0,-2);if(i in o){const a=o[i];return Array.isArray(a)?a.map(l=>r(l,e.slice(t+1))):void 0}else return}else o=o[n]}return o}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yt;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Yt||(Yt={}));var Kt;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(Kt||(Kt={}));var K;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT",o.NULL="NULL"})(K||(K={}));var zt;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(zt||(zt={}));var Xt;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(Xt||(Xt={}));var Qt;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(Qt||(Qt={}));var jt;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(jt||(jt={}));var en;(function(o){o.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH"})(en||(en={}));var tn;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY",o.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(tn||(tn={}));var nn;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(nn||(nn={}));var on;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(on||(on={}));var rn;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(rn||(rn={}));var sn;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(sn||(sn={}));var ct;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(ct||(ct={}));var an;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(an||(an={}));var At;(function(o){o.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",o.JOB_STATE_QUEUED="JOB_STATE_QUEUED",o.JOB_STATE_PENDING="JOB_STATE_PENDING",o.JOB_STATE_RUNNING="JOB_STATE_RUNNING",o.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",o.JOB_STATE_FAILED="JOB_STATE_FAILED",o.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",o.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",o.JOB_STATE_PAUSED="JOB_STATE_PAUSED",o.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",o.JOB_STATE_UPDATING="JOB_STATE_UPDATING",o.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(At||(At={}));var ln;(function(o){o.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",o.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",o.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",o.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",o.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",o.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",o.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ln||(ln={}));var un;(function(o){o.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",o.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",o.BALANCED="BALANCED",o.PRIORITIZE_COST="PRIORITIZE_COST"})(un||(un={}));var cn;(function(o){o.UNSPECIFIED="UNSPECIFIED",o.BLOCKING="BLOCKING",o.NON_BLOCKING="NON_BLOCKING"})(cn||(cn={}));var dn;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(dn||(dn={}));var fn;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE"})(fn||(fn={}));var pn;(function(o){o.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",o.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",o.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(pn||(pn={}));var mn;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(mn||(mn={}));var hn;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(hn||(hn={}));var gn;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi"})(gn||(gn={}));var yn;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yn||(yn={}));var vn;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vn||(vn={}));var Tn;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Tn||(Tn={}));var Cn;(function(o){o.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",o.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",o.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",o.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",o.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",o.EDIT_MODE_STYLE="EDIT_MODE_STYLE",o.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",o.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Cn||(Cn={}));var _n;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(_n||(_n={}));var En;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED"})(En||(En={}));var Sn;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(Sn||(Sn={}));var xn;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xn||(xn={}));var An;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(An||(An={}));var In;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(In||(In={}));var Mn;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mn||(Mn={}));var wn;(function(o){o.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",o.SILENT="SILENT",o.WHEN_IDLE="WHEN_IDLE",o.INTERRUPT="INTERRUPT"})(wn||(wn={}));var Rn;(function(o){o.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",o.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",o.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",o.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",o.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",o.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",o.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",o.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",o.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",o.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",o.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",o.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",o.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Rn||(Rn={}));var Ce;(function(o){o.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",o.PLAY="PLAY",o.PAUSE="PAUSE",o.STOP="STOP",o.RESET_CONTEXT="RESET_CONTEXT"})(Ce||(Ce={}));class Ne{get text(){var e,t,n,i,a,l,u,d;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(m))h!=="text"&&h!=="thought"&&(g!==null||g!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,t,n,i,a,l,u,d;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,n,i,a,l,u,d;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,n,i,a,l,u,d,c;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,n,i,a,l,u,d,c;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Pn{}class Nn{}class Mr{}class wr{}class kn{}class Dn{}class Vn{}class Rr{}class Ln{}class Fn{}class Un{}class Pr{}class It{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Nr{}class kr{}class Dr{get text(){var e,t,n;let i="",a=!1;const l=[];for(const u of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,i+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,t,n;let i="";const a=[];for(const l of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&a.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Vr{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q(o,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(o.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Co(o,e){const t=q(o,e);return t?t.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}`:t.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${t}`:t:""}function _o(o,e){return Array.isArray(e)?e.map(t=>dt(o,t)):[dt(o,e)]}function dt(o,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Lr(o,e){const t=dt(o,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Fr(o,e){const t=dt(o,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Gn(o,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Eo(o,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Gn(o,t)):[Gn(o,e)]}function Mt(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function bn(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function qn(o){return o!=null&&typeof o=="object"&&"functionResponse"in o}function O(o,e){if(e==null)throw new Error("ContentUnion is required");return Mt(e)?e:{role:"user",parts:Eo(o,e)}}function So(o,e){if(!e)return[];if(o.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=O(o,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(o.isVertexAI()){const t=O(o,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>O(o,t)):[O(o,e)]}function Q(o,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(bn(e)||qn(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[O(o,e)]}const t=[],n=[],i=Mt(e[0]);for(const a of e){const l=Mt(a);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(a);else{if(bn(a)||qn(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return i||t.push({role:"user",parts:Eo(o,n)}),t}const Ur=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Bn=b.enum(["string","number","integer","object","array","boolean","null"]),Gr=b.union([Bn,b.array(Bn)]);function br(o=!0){const e=b.lazy(()=>{const t=b.object({type:Gr.optional(),format:b.string().optional(),title:b.string().optional(),description:b.string().optional(),default:b.unknown().optional(),items:e.optional(),minItems:b.coerce.string().optional(),maxItems:b.coerce.string().optional(),enum:b.array(b.unknown()).optional(),properties:b.record(b.string(),e).optional(),required:b.array(b.string()).optional(),minProperties:b.coerce.string().optional(),maxProperties:b.coerce.string().optional(),propertyOrdering:b.array(b.string()).optional(),minimum:b.number().optional(),maximum:b.number().optional(),minLength:b.coerce.string().optional(),maxLength:b.coerce.string().optional(),pattern:b.string().optional(),anyOf:b.array(e).optional(),additionalProperties:b.boolean().optional()});return o?t.strict():t});return e}function qr(o,e){o.includes("null")&&(e.nullable=!0);const t=o.filter(n=>n!=="null");if(t.length===1)e.type=Object.keys(K).includes(t[0].toUpperCase())?K[t[0].toUpperCase()]:K.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.keys(K).includes(n.toUpperCase())?K[n.toUpperCase()]:K.TYPE_UNSPECIFIED})}}function Ee(o){const e={},t=["items"],n=["anyOf"],i=["properties"];if(o.type&&o.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=o.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,o=a[1]):a[1].type==="null"&&(e.nullable=!0,o=a[0])),o.type instanceof Array&&qr(o.type,e);for(const[l,u]of Object.entries(o))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.keys(K).includes(u.toUpperCase())?u.toUpperCase():K.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=Ee(u);else if(n.includes(l)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Ee(c))}e[l]=d}else if(i.includes(l)){const d={};for(const[c,f]of Object.entries(u))d[c]=Ee(f);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=u}return e}function ft(o,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=br().parse(e);return Ee(t)}else return Ee(e)}function xo(o,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Ft(o,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ke(o,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=ft(o,t.parameters)),t.response&&(t.response=ft(o,t.response));return e}function ze(o,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Br(o,e,t,n=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===n;return o.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${o.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:i?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function de(o,e){if(typeof e!="string")throw new Error("name must be a string");return Br(o,e,"cachedContents")}function Ao(o,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function fe(o,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function $r(o){return o!=null&&typeof o=="object"&&"name"in o}function Hr(o){return o!=null&&typeof o=="object"&&"video"in o}function Jr(o){return o!=null&&typeof o=="object"&&"uri"in o}function Io(o,e){var t;let n;if($r(e)&&(n=e.name),!(Jr(e)&&(n=e.uri,n===void 0))&&!(Hr(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Mo(o,e){let t;return o.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function wo(o,e){for(const t of["models","tunedModels","publisherModels"])if(Or(e,t))return e[t];return[]}function Or(o,e){return o!==null&&typeof o=="object"&&e in o}function Zr(o,e={}){const t=o,n={name:t.name,description:t.description,parameters:Ee(mt(t.inputSchema))};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function Wr(o,e={}){const t=[],n=new Set;for(const i of o){const a=i.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const l=Zr(i,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function Yr(o){const e=[];for(const t of o)e.push(mt(t));return e}function Kr(o){const e={};for(const[t,n]of Object.entries(o)){const i=n;e[t]=mt(i)}return e}function mt(o){const e=new Set(["items"]),t=new Set(["anyOf"]),n=new Set(["properties"]),i={};for(const[a,l]of Object.entries(o))if(e.has(a))i[a]=mt(l);else if(t.has(a))i[a]=Yr(l);else if(n.has(a))i[a]=Kr(l);else if(a==="type"){const u=l.toUpperCase();i[a]=Object.keys(K).includes(u)?u:K.TYPE_UNSPECIFIED}else Ur.has(a)&&(i[a]=l);return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zr(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function Xr(o,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&s(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Qr(o,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function jr(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],zr(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],Xr(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],Qr(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function $n(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>jr(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function es(o,e){const t={},n=r(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=r(e,["description"]);i!=null&&s(t,["description"],i);const a=r(e,["name"]);a!=null&&s(t,["name"],a);const l=r(e,["parameters"]);l!=null&&s(t,["parameters"],l);const u=r(e,["response"]);return u!=null&&s(t,["response"],u),t}function ts(o,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function ns(o,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],ts(o,n)),t}function os(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function is(o,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],os(o,n)),t}function rs(){return{}}function ss(o,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>es(o,c))),s(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],ns(o,i));const a=r(e,["googleSearchRetrieval"]);if(a!=null&&s(t,["googleSearchRetrieval"],is(o,a)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&s(t,["urlContext"],rs());const u=r(e,["codeExecution"]);return u!=null&&s(t,["codeExecution"],u),t}function as(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function ls(o,e){const t={},n=r(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function us(o,e){const t={},n=r(e,["latLng"]);n!=null&&s(t,["latLng"],ls(o,n));const i=r(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function cs(o,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],as(o,n));const i=r(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],us(o,i)),t}function ds(o,e,t){const n={},i=r(e,["ttl"]);t!==void 0&&i!=null&&s(t,["ttl"],i);const a=r(e,["expireTime"]);t!==void 0&&a!=null&&s(t,["expireTime"],a);const l=r(e,["displayName"]);t!==void 0&&l!=null&&s(t,["displayName"],l);const u=r(e,["contents"]);if(t!==void 0&&u!=null){let p=Q(o,u);Array.isArray(p)&&(p=p.map(m=>$n(o,m))),s(t,["contents"],p)}const d=r(e,["systemInstruction"]);t!==void 0&&d!=null&&s(t,["systemInstruction"],$n(o,O(o,d)));const c=r(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>ss(o,m))),s(t,["tools"],p)}const f=r(e,["toolConfig"]);if(t!==void 0&&f!=null&&s(t,["toolConfig"],cs(o,f)),r(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function fs(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["model"],Co(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],ds(o,i,t)),t}function ps(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],de(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function ms(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],de(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function hs(o,e,t){const n={},i=r(e,["ttl"]);t!==void 0&&i!=null&&s(t,["ttl"],i);const a=r(e,["expireTime"]);return t!==void 0&&a!=null&&s(t,["expireTime"],a),n}function gs(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],de(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],hs(o,i,t)),t}function ys(o,e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const a=r(e,["pageToken"]);return t!==void 0&&a!=null&&s(t,["_query","pageToken"],a),n}function vs(o,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],ys(o,n,t)),t}function Ts(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function Cs(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["data"]);i!=null&&s(t,["data"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function _s(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function Es(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Ts(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],Cs(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],_s(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function Hn(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Es(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function Ss(o,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&s(t,["description"],n);const i=r(e,["name"]);i!=null&&s(t,["name"],i);const a=r(e,["parameters"]);a!=null&&s(t,["parameters"],a);const l=r(e,["response"]);return l!=null&&s(t,["response"],l),t}function xs(o,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function As(o,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],xs(o,n)),t}function Is(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function Ms(o,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Is(o,n)),t}function ws(){return{}}function Rs(o,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function Ps(o,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],Rs(o,n));const i=r(e,["authType"]);i!=null&&s(t,["authType"],i);const a=r(e,["googleServiceAccountConfig"]);a!=null&&s(t,["googleServiceAccountConfig"],a);const l=r(e,["httpBasicAuthConfig"]);l!=null&&s(t,["httpBasicAuthConfig"],l);const u=r(e,["oauthConfig"]);u!=null&&s(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&s(t,["oidcConfig"],d),t}function Ns(o,e){const t={},n=r(e,["authConfig"]);return n!=null&&s(t,["authConfig"],Ps(o,n)),t}function ks(o,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>Ss(o,p))),s(t,["functionDeclarations"],f)}const i=r(e,["retrieval"]);i!=null&&s(t,["retrieval"],i);const a=r(e,["googleSearch"]);a!=null&&s(t,["googleSearch"],As(o,a));const l=r(e,["googleSearchRetrieval"]);l!=null&&s(t,["googleSearchRetrieval"],Ms(o,l)),r(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],ws());const d=r(e,["googleMaps"]);if(d!=null&&s(t,["googleMaps"],Ns(o,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&s(t,["codeExecution"],c),t}function Ds(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function Vs(o,e){const t={},n=r(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function Ls(o,e){const t={},n=r(e,["latLng"]);n!=null&&s(t,["latLng"],Vs(o,n));const i=r(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function Fs(o,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],Ds(o,n));const i=r(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],Ls(o,i)),t}function Us(o,e,t){const n={},i=r(e,["ttl"]);t!==void 0&&i!=null&&s(t,["ttl"],i);const a=r(e,["expireTime"]);t!==void 0&&a!=null&&s(t,["expireTime"],a);const l=r(e,["displayName"]);t!==void 0&&l!=null&&s(t,["displayName"],l);const u=r(e,["contents"]);if(t!==void 0&&u!=null){let m=Q(o,u);Array.isArray(m)&&(m=m.map(h=>Hn(o,h))),s(t,["contents"],m)}const d=r(e,["systemInstruction"]);t!==void 0&&d!=null&&s(t,["systemInstruction"],Hn(o,O(o,d)));const c=r(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>ks(o,h))),s(t,["tools"],m)}const f=r(e,["toolConfig"]);t!==void 0&&f!=null&&s(t,["toolConfig"],Fs(o,f));const p=r(e,["kmsKeyName"]);return t!==void 0&&p!=null&&s(t,["encryption_spec","kmsKeyName"],p),n}function Gs(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["model"],Co(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],Us(o,i,t)),t}function bs(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],de(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function qs(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],de(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function Bs(o,e,t){const n={},i=r(e,["ttl"]);t!==void 0&&i!=null&&s(t,["ttl"],i);const a=r(e,["expireTime"]);return t!==void 0&&a!=null&&s(t,["expireTime"],a),n}function $s(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],de(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],Bs(o,i,t)),t}function Hs(o,e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const a=r(e,["pageToken"]);return t!==void 0&&a!=null&&s(t,["_query","pageToken"],a),n}function Js(o,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],Hs(o,n,t)),t}function je(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["displayName"]);i!=null&&s(t,["displayName"],i);const a=r(e,["model"]);a!=null&&s(t,["model"],a);const l=r(e,["createTime"]);l!=null&&s(t,["createTime"],l);const u=r(e,["updateTime"]);u!=null&&s(t,["updateTime"],u);const d=r(e,["expireTime"]);d!=null&&s(t,["expireTime"],d);const c=r(e,["usageMetadata"]);return c!=null&&s(t,["usageMetadata"],c),t}function Os(){return{}}function Zs(o,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=r(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>je(o,l))),s(t,["cachedContents"],a)}return t}function et(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["displayName"]);i!=null&&s(t,["displayName"],i);const a=r(e,["model"]);a!=null&&s(t,["model"],a);const l=r(e,["createTime"]);l!=null&&s(t,["createTime"],l);const u=r(e,["updateTime"]);u!=null&&s(t,["updateTime"],u);const d=r(e,["expireTime"]);d!=null&&s(t,["expireTime"],d);const c=r(e,["usageMetadata"]);return c!=null&&s(t,["usageMetadata"],c),t}function Ws(){return{}}function Ys(o,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=r(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>et(o,l))),s(t,["cachedContents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Me;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Me||(Me={}));class ht{constructor(e,t,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,i)}init(e,t,n){var i,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};n?typeof n=="object"?l=Object.assign({},n):l=n:l={config:{}},l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ks extends Re{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ht(Me.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Gs(this.apiClient,e);return u=I("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>et(this.apiClient,f))}else{const c=fs(this.apiClient,e);return u=I("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>je(this.apiClient,f))}}async get(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=bs(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>et(this.apiClient,f))}else{const c=ps(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>je(this.apiClient,f))}}async delete(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=qs(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Ws(),p=new Fn;return Object.assign(p,f),p})}else{const c=ms(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Os(),p=new Fn;return Object.assign(p,f),p})}}async update(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=$s(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>et(this.apiClient,f))}else{const c=gs(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>je(this.apiClient,f))}}async listInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Js(this.apiClient,e);return u=I("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Ys(this.apiClient,f),m=new Un;return Object.assign(m,p),m})}else{const c=vs(this.apiClient,e);return u=I("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Zs(this.apiClient,f),m=new Un;return Object.assign(m,p),m})}}}function Jn(o){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&o[e],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(o){return this instanceof B?(this.v=o,this):new B(o)}function Se(o,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(h){return function(g){return Promise.resolve(g).then(h,p)}}function u(h,g){n[h]&&(i[h]=function(y){return new Promise(function(_,E){a.push([h,y,_,E])>1||d(h,y)})},g&&(i[h]=g(i[h])))}function d(h,g){try{c(n[h](g))}catch(y){m(a[0][3],y)}}function c(h){h.value instanceof B?Promise.resolve(h.value.v).then(f,p):m(a[0][2],h)}function f(h){d("next",h)}function p(h){d("throw",h)}function m(h,g){h(g),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Ve(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof Jn=="function"?Jn(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=o[a]&&function(l){return new Promise(function(u,d){l=o[a](l),i(u,d,l.done,l.value)})}}function i(a,l,u,d){Promise.resolve(d).then(function(c){a({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zs(o){var e;if(o.candidates==null||o.candidates.length===0)return!1;const t=(e=o.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Ro(t)}function Ro(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const e of o.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Xs(o){if(o.length!==0){for(const e of o)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function On(o){if(o===void 0||o.length===0)return[];const e=[],t=o.length;let n=0;for(;n<t;)if(o[n].role==="user")e.push(o[n]),n++;else{const i=[];let a=!0;for(;n<t&&o[n].role==="model";)i.push(o[n]),a&&!Ro(o[n])&&(a=!1),n++;a?e.push(...i):e.pop()}return e}class Qs{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new js(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class js{constructor(e,t,n,i={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),Xs(a)}async sendMessage(e){var t;await this.sendPromise;const n=O(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,u;const d=await i,c=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(n,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const n=O(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,n)}getHistory(e=!1){const t=e?On(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,i;return Se(this,arguments,function*(){var l,u,d,c;const f=[];try{for(var p=!0,m=Ve(e),h;h=yield B(m.next()),l=h.done,!l;p=!0){c=h.value,p=!1;const g=c;if(zs(g)){const y=(i=(n=g.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content;y!==void 0&&f.push(y)}yield yield B(g)}}catch(g){u={error:g}}finally{try{!p&&!l&&(d=m.return)&&(yield B(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(t,f)})}recordHistory(e,t,n){let i=[];t.length>0&&t.every(a=>a.role!==void 0)?i=t:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...On(n)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ea(o,e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const a=r(e,["pageToken"]);return t!==void 0&&a!=null&&s(t,["_query","pageToken"],a),n}function ta(o,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],ea(o,n,t)),t}function na(o,e){const t={},n=r(e,["details"]);n!=null&&s(t,["details"],n);const i=r(e,["message"]);i!=null&&s(t,["message"],i);const a=r(e,["code"]);return a!=null&&s(t,["code"],a),t}function oa(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["displayName"]);i!=null&&s(t,["displayName"],i);const a=r(e,["mimeType"]);a!=null&&s(t,["mimeType"],a);const l=r(e,["sizeBytes"]);l!=null&&s(t,["sizeBytes"],l);const u=r(e,["createTime"]);u!=null&&s(t,["createTime"],u);const d=r(e,["expirationTime"]);d!=null&&s(t,["expirationTime"],d);const c=r(e,["updateTime"]);c!=null&&s(t,["updateTime"],c);const f=r(e,["sha256Hash"]);f!=null&&s(t,["sha256Hash"],f);const p=r(e,["uri"]);p!=null&&s(t,["uri"],p);const m=r(e,["downloadUri"]);m!=null&&s(t,["downloadUri"],m);const h=r(e,["state"]);h!=null&&s(t,["state"],h);const g=r(e,["source"]);g!=null&&s(t,["source"],g);const y=r(e,["videoMetadata"]);y!=null&&s(t,["videoMetadata"],y);const _=r(e,["error"]);return _!=null&&s(t,["error"],na(o,_)),t}function ia(o,e){const t={},n=r(e,["file"]);n!=null&&s(t,["file"],oa(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function ra(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","file"],Io(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function sa(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","file"],Io(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function aa(o,e){const t={},n=r(e,["details"]);n!=null&&s(t,["details"],n);const i=r(e,["message"]);i!=null&&s(t,["message"],i);const a=r(e,["code"]);return a!=null&&s(t,["code"],a),t}function wt(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["displayName"]);i!=null&&s(t,["displayName"],i);const a=r(e,["mimeType"]);a!=null&&s(t,["mimeType"],a);const l=r(e,["sizeBytes"]);l!=null&&s(t,["sizeBytes"],l);const u=r(e,["createTime"]);u!=null&&s(t,["createTime"],u);const d=r(e,["expirationTime"]);d!=null&&s(t,["expirationTime"],d);const c=r(e,["updateTime"]);c!=null&&s(t,["updateTime"],c);const f=r(e,["sha256Hash"]);f!=null&&s(t,["sha256Hash"],f);const p=r(e,["uri"]);p!=null&&s(t,["uri"],p);const m=r(e,["downloadUri"]);m!=null&&s(t,["downloadUri"],m);const h=r(e,["state"]);h!=null&&s(t,["state"],h);const g=r(e,["source"]);g!=null&&s(t,["source"],g);const y=r(e,["videoMetadata"]);y!=null&&s(t,["videoMetadata"],y);const _=r(e,["error"]);return _!=null&&s(t,["error"],aa(o,_)),t}function la(o,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=r(e,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>wt(o,l))),s(t,["files"],a)}return t}function ua(){return{}}function ca(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class da extends Re{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ht(Me.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>wt(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ta(this.apiClient,e);return a=I("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const c=la(this.apiClient,d),f=new Pr;return Object.assign(f,c),f})}}async createInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ia(this.apiClient,e);return a=I("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=ua(),c=new Nr;return Object.assign(c,d),c})}}async get(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ra(this.apiClient,e);return a=I("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>wt(this.apiClient,d))}}async delete(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sa(this.apiClient,e);return a=I("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=ca(),c=new kr;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fa(o,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function pa(o,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function Po(o,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],fa(o,n)),t}function ma(o,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],pa(o,n)),t}function ha(o,e){const t={},n=r(e,["speaker"]);n!=null&&s(t,["speaker"],n);const i=r(e,["voiceConfig"]);return i!=null&&s(t,["voiceConfig"],Po(o,i)),t}function ga(o,e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>ha(o,a))),s(t,["speakerVoiceConfigs"],i)}return t}function ya(o,e){const t={},n=r(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],Po(o,n));const i=r(e,["multiSpeakerVoiceConfig"]);i!=null&&s(t,["multiSpeakerVoiceConfig"],ga(o,i));const a=r(e,["languageCode"]);return a!=null&&s(t,["languageCode"],a),t}function va(o,e){const t={},n=r(e,["voiceConfig"]);if(n!=null&&s(t,["voiceConfig"],ma(o,n)),r(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=r(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function Ta(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function Ca(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function _a(o,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&s(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Ea(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["data"]);i!=null&&s(t,["data"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function Sa(o,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function xa(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function Aa(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Ta(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],_a(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],Sa(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function Ia(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Ca(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],Ea(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],xa(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function Ma(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Aa(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function wa(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Ia(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function Ra(o,e){const t={},n=r(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=r(e,["description"]);i!=null&&s(t,["description"],i);const a=r(e,["name"]);a!=null&&s(t,["name"],a);const l=r(e,["parameters"]);l!=null&&s(t,["parameters"],l);const u=r(e,["response"]);return u!=null&&s(t,["response"],u),t}function Pa(o,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&s(t,["description"],n);const i=r(e,["name"]);i!=null&&s(t,["name"],i);const a=r(e,["parameters"]);a!=null&&s(t,["parameters"],a);const l=r(e,["response"]);return l!=null&&s(t,["response"],l),t}function Na(o,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function ka(o,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function Da(o,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Na(o,n)),t}function Va(o,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],ka(o,n)),t}function La(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function Fa(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function Ua(o,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],La(o,n)),t}function Ga(o,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Fa(o,n)),t}function ba(){return{}}function qa(o,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function Ba(o,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],qa(o,n));const i=r(e,["authType"]);i!=null&&s(t,["authType"],i);const a=r(e,["googleServiceAccountConfig"]);a!=null&&s(t,["googleServiceAccountConfig"],a);const l=r(e,["httpBasicAuthConfig"]);l!=null&&s(t,["httpBasicAuthConfig"],l);const u=r(e,["oauthConfig"]);u!=null&&s(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&s(t,["oidcConfig"],d),t}function $a(o,e){const t={},n=r(e,["authConfig"]);return n!=null&&s(t,["authConfig"],Ba(o,n)),t}function Ha(){return{}}function Ja(o,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Ra(o,c))),s(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],Da(o,i));const a=r(e,["googleSearchRetrieval"]);if(a!=null&&s(t,["googleSearchRetrieval"],Ua(o,a)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&s(t,["urlContext"],Ha());const u=r(e,["codeExecution"]);return u!=null&&s(t,["codeExecution"],u),t}function Oa(o,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>Pa(o,p))),s(t,["functionDeclarations"],f)}const i=r(e,["retrieval"]);i!=null&&s(t,["retrieval"],i);const a=r(e,["googleSearch"]);a!=null&&s(t,["googleSearch"],Va(o,a));const l=r(e,["googleSearchRetrieval"]);l!=null&&s(t,["googleSearchRetrieval"],Ga(o,l)),r(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],ba());const d=r(e,["googleMaps"]);if(d!=null&&s(t,["googleMaps"],$a(o,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&s(t,["codeExecution"],c),t}function Za(o,e){const t={},n=r(e,["handle"]);if(n!=null&&s(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Wa(o,e){const t={},n=r(e,["handle"]);n!=null&&s(t,["handle"],n);const i=r(e,["transparent"]);return i!=null&&s(t,["transparent"],i),t}function Zn(){return{}}function Wn(){return{}}function Ya(o,e){const t={},n=r(e,["disabled"]);n!=null&&s(t,["disabled"],n);const i=r(e,["startOfSpeechSensitivity"]);i!=null&&s(t,["startOfSpeechSensitivity"],i);const a=r(e,["endOfSpeechSensitivity"]);a!=null&&s(t,["endOfSpeechSensitivity"],a);const l=r(e,["prefixPaddingMs"]);l!=null&&s(t,["prefixPaddingMs"],l);const u=r(e,["silenceDurationMs"]);return u!=null&&s(t,["silenceDurationMs"],u),t}function Ka(o,e){const t={},n=r(e,["disabled"]);n!=null&&s(t,["disabled"],n);const i=r(e,["startOfSpeechSensitivity"]);i!=null&&s(t,["startOfSpeechSensitivity"],i);const a=r(e,["endOfSpeechSensitivity"]);a!=null&&s(t,["endOfSpeechSensitivity"],a);const l=r(e,["prefixPaddingMs"]);l!=null&&s(t,["prefixPaddingMs"],l);const u=r(e,["silenceDurationMs"]);return u!=null&&s(t,["silenceDurationMs"],u),t}function za(o,e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&s(t,["automaticActivityDetection"],Ya(o,n));const i=r(e,["activityHandling"]);i!=null&&s(t,["activityHandling"],i);const a=r(e,["turnCoverage"]);return a!=null&&s(t,["turnCoverage"],a),t}function Xa(o,e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&s(t,["automaticActivityDetection"],Ka(o,n));const i=r(e,["activityHandling"]);i!=null&&s(t,["activityHandling"],i);const a=r(e,["turnCoverage"]);return a!=null&&s(t,["turnCoverage"],a),t}function Qa(o,e){const t={},n=r(e,["targetTokens"]);return n!=null&&s(t,["targetTokens"],n),t}function ja(o,e){const t={},n=r(e,["targetTokens"]);return n!=null&&s(t,["targetTokens"],n),t}function el(o,e){const t={},n=r(e,["triggerTokens"]);n!=null&&s(t,["triggerTokens"],n);const i=r(e,["slidingWindow"]);return i!=null&&s(t,["slidingWindow"],Qa(o,i)),t}function tl(o,e){const t={},n=r(e,["triggerTokens"]);n!=null&&s(t,["triggerTokens"],n);const i=r(e,["slidingWindow"]);return i!=null&&s(t,["slidingWindow"],ja(o,i)),t}function nl(o,e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&s(t,["proactiveAudio"],n),t}function ol(o,e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&s(t,["proactiveAudio"],n),t}function il(o,e,t){const n={},i=r(e,["generationConfig"]);t!==void 0&&i!=null&&s(t,["setup","generationConfig"],i);const a=r(e,["responseModalities"]);t!==void 0&&a!=null&&s(t,["setup","generationConfig","responseModalities"],a);const l=r(e,["temperature"]);t!==void 0&&l!=null&&s(t,["setup","generationConfig","temperature"],l);const u=r(e,["topP"]);t!==void 0&&u!=null&&s(t,["setup","generationConfig","topP"],u);const d=r(e,["topK"]);t!==void 0&&d!=null&&s(t,["setup","generationConfig","topK"],d);const c=r(e,["maxOutputTokens"]);t!==void 0&&c!=null&&s(t,["setup","generationConfig","maxOutputTokens"],c);const f=r(e,["mediaResolution"]);t!==void 0&&f!=null&&s(t,["setup","generationConfig","mediaResolution"],f);const p=r(e,["seed"]);t!==void 0&&p!=null&&s(t,["setup","generationConfig","seed"],p);const m=r(e,["speechConfig"]);t!==void 0&&m!=null&&s(t,["setup","generationConfig","speechConfig"],ya(o,Ft(o,m)));const h=r(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&s(t,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(e,["systemInstruction"]);t!==void 0&&g!=null&&s(t,["setup","systemInstruction"],Ma(o,O(o,g)));const y=r(e,["tools"]);if(t!==void 0&&y!=null){let L=ze(o,y);Array.isArray(L)&&(L=L.map(G=>Ja(o,Ke(o,G)))),s(t,["setup","tools"],L)}const _=r(e,["sessionResumption"]);t!==void 0&&_!=null&&s(t,["setup","sessionResumption"],Za(o,_));const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&s(t,["setup","inputAudioTranscription"],Zn());const x=r(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&s(t,["setup","outputAudioTranscription"],Zn());const R=r(e,["realtimeInputConfig"]);t!==void 0&&R!=null&&s(t,["setup","realtimeInputConfig"],za(o,R));const D=r(e,["contextWindowCompression"]);t!==void 0&&D!=null&&s(t,["setup","contextWindowCompression"],el(o,D));const V=r(e,["proactivity"]);return t!==void 0&&V!=null&&s(t,["setup","proactivity"],nl(o,V)),n}function rl(o,e,t){const n={},i=r(e,["generationConfig"]);t!==void 0&&i!=null&&s(t,["setup","generationConfig"],i);const a=r(e,["responseModalities"]);t!==void 0&&a!=null&&s(t,["setup","generationConfig","responseModalities"],a);const l=r(e,["temperature"]);t!==void 0&&l!=null&&s(t,["setup","generationConfig","temperature"],l);const u=r(e,["topP"]);t!==void 0&&u!=null&&s(t,["setup","generationConfig","topP"],u);const d=r(e,["topK"]);t!==void 0&&d!=null&&s(t,["setup","generationConfig","topK"],d);const c=r(e,["maxOutputTokens"]);t!==void 0&&c!=null&&s(t,["setup","generationConfig","maxOutputTokens"],c);const f=r(e,["mediaResolution"]);t!==void 0&&f!=null&&s(t,["setup","generationConfig","mediaResolution"],f);const p=r(e,["seed"]);t!==void 0&&p!=null&&s(t,["setup","generationConfig","seed"],p);const m=r(e,["speechConfig"]);t!==void 0&&m!=null&&s(t,["setup","generationConfig","speechConfig"],va(o,Ft(o,m)));const h=r(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&s(t,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(e,["systemInstruction"]);t!==void 0&&g!=null&&s(t,["setup","systemInstruction"],wa(o,O(o,g)));const y=r(e,["tools"]);if(t!==void 0&&y!=null){let L=ze(o,y);Array.isArray(L)&&(L=L.map(G=>Oa(o,Ke(o,G)))),s(t,["setup","tools"],L)}const _=r(e,["sessionResumption"]);t!==void 0&&_!=null&&s(t,["setup","sessionResumption"],Wa(o,_));const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&s(t,["setup","inputAudioTranscription"],Wn());const x=r(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&s(t,["setup","outputAudioTranscription"],Wn());const R=r(e,["realtimeInputConfig"]);t!==void 0&&R!=null&&s(t,["setup","realtimeInputConfig"],Xa(o,R));const D=r(e,["contextWindowCompression"]);t!==void 0&&D!=null&&s(t,["setup","contextWindowCompression"],tl(o,D));const V=r(e,["proactivity"]);return t!==void 0&&V!=null&&s(t,["setup","proactivity"],ol(o,V)),n}function sl(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["setup","model"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],il(o,i,t)),t}function al(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["setup","model"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],rl(o,i,t)),t}function ll(){return{}}function ul(){return{}}function cl(){return{}}function dl(){return{}}function fl(o,e){const t={},n=r(e,["media"]);n!=null&&s(t,["mediaChunks"],_o(o,n));const i=r(e,["audio"]);i!=null&&s(t,["audio"],Fr(o,i));const a=r(e,["audioStreamEnd"]);a!=null&&s(t,["audioStreamEnd"],a);const l=r(e,["video"]);l!=null&&s(t,["video"],Lr(o,l));const u=r(e,["text"]);return u!=null&&s(t,["text"],u),r(e,["activityStart"])!=null&&s(t,["activityStart"],ll()),r(e,["activityEnd"])!=null&&s(t,["activityEnd"],cl()),t}function pl(o,e){const t={},n=r(e,["media"]);if(n!=null&&s(t,["mediaChunks"],_o(o,n)),r(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=r(e,["audioStreamEnd"]);if(i!=null&&s(t,["audioStreamEnd"],i),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(r(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return r(e,["activityStart"])!=null&&s(t,["activityStart"],ul()),r(e,["activityEnd"])!=null&&s(t,["activityEnd"],dl()),t}function No(o,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const i=r(e,["weight"]);return i!=null&&s(t,["weight"],i),t}function ml(o,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>No(o,a))),s(t,["weightedPrompts"],i)}return t}function ko(o,e){const t={},n=r(e,["temperature"]);n!=null&&s(t,["temperature"],n);const i=r(e,["topK"]);i!=null&&s(t,["topK"],i);const a=r(e,["seed"]);a!=null&&s(t,["seed"],a);const l=r(e,["guidance"]);l!=null&&s(t,["guidance"],l);const u=r(e,["bpm"]);u!=null&&s(t,["bpm"],u);const d=r(e,["density"]);d!=null&&s(t,["density"],d);const c=r(e,["brightness"]);c!=null&&s(t,["brightness"],c);const f=r(e,["scale"]);f!=null&&s(t,["scale"],f);const p=r(e,["muteBass"]);p!=null&&s(t,["muteBass"],p);const m=r(e,["muteDrums"]);m!=null&&s(t,["muteDrums"],m);const h=r(e,["onlyBassAndDrums"]);return h!=null&&s(t,["onlyBassAndDrums"],h),t}function hl(o,e){const t={},n=r(e,["musicGenerationConfig"]);return n!=null&&s(t,["musicGenerationConfig"],ko(o,n)),t}function Do(o,e){const t={},n=r(e,["model"]);return n!=null&&s(t,["model"],n),t}function Vo(o,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>No(o,a))),s(t,["weightedPrompts"],i)}return t}function Rt(o,e){const t={},n=r(e,["setup"]);n!=null&&s(t,["setup"],Do(o,n));const i=r(e,["clientContent"]);i!=null&&s(t,["clientContent"],Vo(o,i));const a=r(e,["musicGenerationConfig"]);a!=null&&s(t,["musicGenerationConfig"],ko(o,a));const l=r(e,["playbackControl"]);return l!=null&&s(t,["playbackControl"],l),t}function gl(){return{}}function yl(){return{}}function vl(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function Tl(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function Cl(o,e){const t={},n=r(e,["data"]);n!=null&&s(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function _l(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["data"]);i!=null&&s(t,["data"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function El(o,e){const t={},n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Sl(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function xl(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],vl(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],Cl(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],El(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function Al(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Tl(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],_l(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],Sl(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function Il(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>xl(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function Ml(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Al(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function Yn(o,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const i=r(e,["finished"]);return i!=null&&s(t,["finished"],i),t}function Kn(o,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const i=r(e,["finished"]);return i!=null&&s(t,["finished"],i),t}function wl(o,e){const t={},n=r(e,["retrievedUrl"]);n!=null&&s(t,["retrievedUrl"],n);const i=r(e,["urlRetrievalStatus"]);return i!=null&&s(t,["urlRetrievalStatus"],i),t}function Rl(o,e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>wl(o,a))),s(t,["urlMetadata"],i)}return t}function Pl(o,e){const t={},n=r(e,["modelTurn"]);n!=null&&s(t,["modelTurn"],Il(o,n));const i=r(e,["turnComplete"]);i!=null&&s(t,["turnComplete"],i);const a=r(e,["interrupted"]);a!=null&&s(t,["interrupted"],a);const l=r(e,["groundingMetadata"]);l!=null&&s(t,["groundingMetadata"],l);const u=r(e,["generationComplete"]);u!=null&&s(t,["generationComplete"],u);const d=r(e,["inputTranscription"]);d!=null&&s(t,["inputTranscription"],Yn(o,d));const c=r(e,["outputTranscription"]);c!=null&&s(t,["outputTranscription"],Yn(o,c));const f=r(e,["urlContextMetadata"]);return f!=null&&s(t,["urlContextMetadata"],Rl(o,f)),t}function Nl(o,e){const t={},n=r(e,["modelTurn"]);n!=null&&s(t,["modelTurn"],Ml(o,n));const i=r(e,["turnComplete"]);i!=null&&s(t,["turnComplete"],i);const a=r(e,["interrupted"]);a!=null&&s(t,["interrupted"],a);const l=r(e,["groundingMetadata"]);l!=null&&s(t,["groundingMetadata"],l);const u=r(e,["generationComplete"]);u!=null&&s(t,["generationComplete"],u);const d=r(e,["inputTranscription"]);d!=null&&s(t,["inputTranscription"],Kn(o,d));const c=r(e,["outputTranscription"]);return c!=null&&s(t,["outputTranscription"],Kn(o,c)),t}function kl(o,e){const t={},n=r(e,["id"]);n!=null&&s(t,["id"],n);const i=r(e,["args"]);i!=null&&s(t,["args"],i);const a=r(e,["name"]);return a!=null&&s(t,["name"],a),t}function Dl(o,e){const t={},n=r(e,["args"]);n!=null&&s(t,["args"],n);const i=r(e,["name"]);return i!=null&&s(t,["name"],i),t}function Vl(o,e){const t={},n=r(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>kl(o,a))),s(t,["functionCalls"],i)}return t}function Ll(o,e){const t={},n=r(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Dl(o,a))),s(t,["functionCalls"],i)}return t}function Fl(o,e){const t={},n=r(e,["ids"]);return n!=null&&s(t,["ids"],n),t}function Ul(o,e){const t={},n=r(e,["ids"]);return n!=null&&s(t,["ids"],n),t}function Xe(o,e){const t={},n=r(e,["modality"]);n!=null&&s(t,["modality"],n);const i=r(e,["tokenCount"]);return i!=null&&s(t,["tokenCount"],i),t}function Qe(o,e){const t={},n=r(e,["modality"]);n!=null&&s(t,["modality"],n);const i=r(e,["tokenCount"]);return i!=null&&s(t,["tokenCount"],i),t}function Gl(o,e){const t={},n=r(e,["promptTokenCount"]);n!=null&&s(t,["promptTokenCount"],n);const i=r(e,["cachedContentTokenCount"]);i!=null&&s(t,["cachedContentTokenCount"],i);const a=r(e,["responseTokenCount"]);a!=null&&s(t,["responseTokenCount"],a);const l=r(e,["toolUsePromptTokenCount"]);l!=null&&s(t,["toolUsePromptTokenCount"],l);const u=r(e,["thoughtsTokenCount"]);u!=null&&s(t,["thoughtsTokenCount"],u);const d=r(e,["totalTokenCount"]);d!=null&&s(t,["totalTokenCount"],d);const c=r(e,["promptTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Xe(o,g))),s(t,["promptTokensDetails"],h)}const f=r(e,["cacheTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Xe(o,g))),s(t,["cacheTokensDetails"],h)}const p=r(e,["responseTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>Xe(o,g))),s(t,["responseTokensDetails"],h)}const m=r(e,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>Xe(o,g))),s(t,["toolUsePromptTokensDetails"],h)}return t}function bl(o,e){const t={},n=r(e,["promptTokenCount"]);n!=null&&s(t,["promptTokenCount"],n);const i=r(e,["cachedContentTokenCount"]);i!=null&&s(t,["cachedContentTokenCount"],i);const a=r(e,["candidatesTokenCount"]);a!=null&&s(t,["responseTokenCount"],a);const l=r(e,["toolUsePromptTokenCount"]);l!=null&&s(t,["toolUsePromptTokenCount"],l);const u=r(e,["thoughtsTokenCount"]);u!=null&&s(t,["thoughtsTokenCount"],u);const d=r(e,["totalTokenCount"]);d!=null&&s(t,["totalTokenCount"],d);const c=r(e,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>Qe(o,y))),s(t,["promptTokensDetails"],g)}const f=r(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>Qe(o,y))),s(t,["cacheTokensDetails"],g)}const p=r(e,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>Qe(o,y))),s(t,["responseTokensDetails"],g)}const m=r(e,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>Qe(o,y))),s(t,["toolUsePromptTokensDetails"],g)}const h=r(e,["trafficType"]);return h!=null&&s(t,["trafficType"],h),t}function ql(o,e){const t={},n=r(e,["timeLeft"]);return n!=null&&s(t,["timeLeft"],n),t}function Bl(o,e){const t={},n=r(e,["timeLeft"]);return n!=null&&s(t,["timeLeft"],n),t}function $l(o,e){const t={},n=r(e,["newHandle"]);n!=null&&s(t,["newHandle"],n);const i=r(e,["resumable"]);i!=null&&s(t,["resumable"],i);const a=r(e,["lastConsumedClientMessageIndex"]);return a!=null&&s(t,["lastConsumedClientMessageIndex"],a),t}function Hl(o,e){const t={},n=r(e,["newHandle"]);n!=null&&s(t,["newHandle"],n);const i=r(e,["resumable"]);i!=null&&s(t,["resumable"],i);const a=r(e,["lastConsumedClientMessageIndex"]);return a!=null&&s(t,["lastConsumedClientMessageIndex"],a),t}function Jl(o,e){const t={};r(e,["setupComplete"])!=null&&s(t,["setupComplete"],gl());const i=r(e,["serverContent"]);i!=null&&s(t,["serverContent"],Pl(o,i));const a=r(e,["toolCall"]);a!=null&&s(t,["toolCall"],Vl(o,a));const l=r(e,["toolCallCancellation"]);l!=null&&s(t,["toolCallCancellation"],Fl(o,l));const u=r(e,["usageMetadata"]);u!=null&&s(t,["usageMetadata"],Gl(o,u));const d=r(e,["goAway"]);d!=null&&s(t,["goAway"],ql(o,d));const c=r(e,["sessionResumptionUpdate"]);return c!=null&&s(t,["sessionResumptionUpdate"],$l(o,c)),t}function Ol(o,e){const t={};r(e,["setupComplete"])!=null&&s(t,["setupComplete"],yl());const i=r(e,["serverContent"]);i!=null&&s(t,["serverContent"],Nl(o,i));const a=r(e,["toolCall"]);a!=null&&s(t,["toolCall"],Ll(o,a));const l=r(e,["toolCallCancellation"]);l!=null&&s(t,["toolCallCancellation"],Ul(o,l));const u=r(e,["usageMetadata"]);u!=null&&s(t,["usageMetadata"],bl(o,u));const d=r(e,["goAway"]);d!=null&&s(t,["goAway"],Bl(o,d));const c=r(e,["sessionResumptionUpdate"]);return c!=null&&s(t,["sessionResumptionUpdate"],Hl(o,c)),t}function Zl(){return{}}function Wl(o,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const i=r(e,["weight"]);return i!=null&&s(t,["weight"],i),t}function Yl(o,e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Wl(o,a))),s(t,["weightedPrompts"],i)}return t}function Kl(o,e){const t={},n=r(e,["temperature"]);n!=null&&s(t,["temperature"],n);const i=r(e,["topK"]);i!=null&&s(t,["topK"],i);const a=r(e,["seed"]);a!=null&&s(t,["seed"],a);const l=r(e,["guidance"]);l!=null&&s(t,["guidance"],l);const u=r(e,["bpm"]);u!=null&&s(t,["bpm"],u);const d=r(e,["density"]);d!=null&&s(t,["density"],d);const c=r(e,["brightness"]);c!=null&&s(t,["brightness"],c);const f=r(e,["scale"]);f!=null&&s(t,["scale"],f);const p=r(e,["muteBass"]);p!=null&&s(t,["muteBass"],p);const m=r(e,["muteDrums"]);m!=null&&s(t,["muteDrums"],m);const h=r(e,["onlyBassAndDrums"]);return h!=null&&s(t,["onlyBassAndDrums"],h),t}function zl(o,e){const t={},n=r(e,["clientContent"]);n!=null&&s(t,["clientContent"],Yl(o,n));const i=r(e,["musicGenerationConfig"]);return i!=null&&s(t,["musicGenerationConfig"],Kl(o,i)),t}function Xl(o,e){const t={},n=r(e,["data"]);n!=null&&s(t,["data"],n);const i=r(e,["mimeType"]);i!=null&&s(t,["mimeType"],i);const a=r(e,["sourceMetadata"]);return a!=null&&s(t,["sourceMetadata"],zl(o,a)),t}function Ql(o,e){const t={},n=r(e,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Xl(o,a))),s(t,["audioChunks"],i)}return t}function jl(o,e){const t={},n=r(e,["text"]);n!=null&&s(t,["text"],n);const i=r(e,["filteredReason"]);return i!=null&&s(t,["filteredReason"],i),t}function eu(o,e){const t={};r(e,["setupComplete"])!=null&&s(t,["setupComplete"],Zl());const i=r(e,["serverContent"]);i!=null&&s(t,["serverContent"],Ql(o,i));const a=r(e,["filteredPrompt"]);return a!=null&&s(t,["filteredPrompt"],jl(o,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tu(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function nu(o,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&s(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function ou(o,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function iu(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],tu(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],nu(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],ou(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function gt(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>iu(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function ru(o,e){const t={},n=r(e,["anyOf"]);n!=null&&s(t,["anyOf"],n);const i=r(e,["default"]);i!=null&&s(t,["default"],i);const a=r(e,["description"]);a!=null&&s(t,["description"],a);const l=r(e,["enum"]);l!=null&&s(t,["enum"],l);const u=r(e,["example"]);u!=null&&s(t,["example"],u);const d=r(e,["format"]);d!=null&&s(t,["format"],d);const c=r(e,["items"]);c!=null&&s(t,["items"],c);const f=r(e,["maxItems"]);f!=null&&s(t,["maxItems"],f);const p=r(e,["maxLength"]);p!=null&&s(t,["maxLength"],p);const m=r(e,["maxProperties"]);m!=null&&s(t,["maxProperties"],m);const h=r(e,["maximum"]);h!=null&&s(t,["maximum"],h);const g=r(e,["minItems"]);g!=null&&s(t,["minItems"],g);const y=r(e,["minLength"]);y!=null&&s(t,["minLength"],y);const _=r(e,["minProperties"]);_!=null&&s(t,["minProperties"],_);const E=r(e,["minimum"]);E!=null&&s(t,["minimum"],E);const x=r(e,["nullable"]);x!=null&&s(t,["nullable"],x);const R=r(e,["pattern"]);R!=null&&s(t,["pattern"],R);const D=r(e,["properties"]);D!=null&&s(t,["properties"],D);const V=r(e,["propertyOrdering"]);V!=null&&s(t,["propertyOrdering"],V);const L=r(e,["required"]);L!=null&&s(t,["required"],L);const G=r(e,["title"]);G!=null&&s(t,["title"],G);const H=r(e,["type"]);return H!=null&&s(t,["type"],H),t}function su(o,e){const t={};if(r(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(e,["category"]);n!=null&&s(t,["category"],n);const i=r(e,["threshold"]);return i!=null&&s(t,["threshold"],i),t}function au(o,e){const t={},n=r(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=r(e,["description"]);i!=null&&s(t,["description"],i);const a=r(e,["name"]);a!=null&&s(t,["name"],a);const l=r(e,["parameters"]);l!=null&&s(t,["parameters"],l);const u=r(e,["response"]);return u!=null&&s(t,["response"],u),t}function lu(o,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function uu(o,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],lu(o,n)),t}function cu(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function du(o,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],cu(o,n)),t}function fu(){return{}}function pu(o,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>au(o,c))),s(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],uu(o,i));const a=r(e,["googleSearchRetrieval"]);if(a!=null&&s(t,["googleSearchRetrieval"],du(o,a)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&s(t,["urlContext"],fu());const u=r(e,["codeExecution"]);return u!=null&&s(t,["codeExecution"],u),t}function mu(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function hu(o,e){const t={},n=r(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function gu(o,e){const t={},n=r(e,["latLng"]);n!=null&&s(t,["latLng"],hu(o,n));const i=r(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function yu(o,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],mu(o,n));const i=r(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],gu(o,i)),t}function vu(o,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function Lo(o,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],vu(o,n)),t}function Tu(o,e){const t={},n=r(e,["speaker"]);n!=null&&s(t,["speaker"],n);const i=r(e,["voiceConfig"]);return i!=null&&s(t,["voiceConfig"],Lo(o,i)),t}function Cu(o,e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Tu(o,a))),s(t,["speakerVoiceConfigs"],i)}return t}function _u(o,e){const t={},n=r(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],Lo(o,n));const i=r(e,["multiSpeakerVoiceConfig"]);i!=null&&s(t,["multiSpeakerVoiceConfig"],Cu(o,i));const a=r(e,["languageCode"]);return a!=null&&s(t,["languageCode"],a),t}function Eu(o,e){const t={},n=r(e,["includeThoughts"]);n!=null&&s(t,["includeThoughts"],n);const i=r(e,["thinkingBudget"]);return i!=null&&s(t,["thinkingBudget"],i),t}function Su(o,e,t){const n={},i=r(e,["systemInstruction"]);t!==void 0&&i!=null&&s(t,["systemInstruction"],gt(o,O(o,i)));const a=r(e,["temperature"]);a!=null&&s(n,["temperature"],a);const l=r(e,["topP"]);l!=null&&s(n,["topP"],l);const u=r(e,["topK"]);u!=null&&s(n,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&s(n,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&s(n,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&s(n,["stopSequences"],f);const p=r(e,["responseLogprobs"]);p!=null&&s(n,["responseLogprobs"],p);const m=r(e,["logprobs"]);m!=null&&s(n,["logprobs"],m);const h=r(e,["presencePenalty"]);h!=null&&s(n,["presencePenalty"],h);const g=r(e,["frequencyPenalty"]);g!=null&&s(n,["frequencyPenalty"],g);const y=r(e,["seed"]);y!=null&&s(n,["seed"],y);const _=r(e,["responseMimeType"]);_!=null&&s(n,["responseMimeType"],_);const E=r(e,["responseSchema"]);if(E!=null&&s(n,["responseSchema"],ru(o,ft(o,E))),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=r(e,["safetySettings"]);if(t!==void 0&&x!=null){let F=x;Array.isArray(F)&&(F=F.map(W=>su(o,W))),s(t,["safetySettings"],F)}const R=r(e,["tools"]);if(t!==void 0&&R!=null){let F=ze(o,R);Array.isArray(F)&&(F=F.map(W=>pu(o,Ke(o,W)))),s(t,["tools"],F)}const D=r(e,["toolConfig"]);if(t!==void 0&&D!=null&&s(t,["toolConfig"],yu(o,D)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=r(e,["cachedContent"]);t!==void 0&&V!=null&&s(t,["cachedContent"],de(o,V));const L=r(e,["responseModalities"]);L!=null&&s(n,["responseModalities"],L);const G=r(e,["mediaResolution"]);G!=null&&s(n,["mediaResolution"],G);const H=r(e,["speechConfig"]);if(H!=null&&s(n,["speechConfig"],_u(o,xo(o,H))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=r(e,["thinkingConfig"]);return P!=null&&s(n,["thinkingConfig"],Eu(o,P)),n}function zn(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["contents"]);if(i!=null){let l=Q(o,i);Array.isArray(l)&&(l=l.map(u=>gt(o,u))),s(t,["contents"],l)}const a=r(e,["config"]);return a!=null&&s(t,["generationConfig"],Su(o,a,t)),t}function xu(o,e,t){const n={},i=r(e,["taskType"]);t!==void 0&&i!=null&&s(t,["requests[]","taskType"],i);const a=r(e,["title"]);t!==void 0&&a!=null&&s(t,["requests[]","title"],a);const l=r(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&s(t,["requests[]","outputDimensionality"],l),r(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Au(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["contents"]);i!=null&&s(t,["requests[]","content"],So(o,i));const a=r(e,["config"]);a!=null&&s(t,["config"],xu(o,a,t));const l=r(e,["model"]);return l!==void 0&&s(t,["requests[]","model"],q(o,l)),t}function Iu(o,e,t){const n={};if(r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=r(e,["numberOfImages"]);t!==void 0&&i!=null&&s(t,["parameters","sampleCount"],i);const a=r(e,["aspectRatio"]);t!==void 0&&a!=null&&s(t,["parameters","aspectRatio"],a);const l=r(e,["guidanceScale"]);if(t!==void 0&&l!=null&&s(t,["parameters","guidanceScale"],l),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=r(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&s(t,["parameters","safetySetting"],u);const d=r(e,["personGeneration"]);t!==void 0&&d!=null&&s(t,["parameters","personGeneration"],d);const c=r(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&s(t,["parameters","includeSafetyAttributes"],c);const f=r(e,["includeRaiReason"]);t!==void 0&&f!=null&&s(t,["parameters","includeRaiReason"],f);const p=r(e,["language"]);t!==void 0&&p!=null&&s(t,["parameters","language"],p);const m=r(e,["outputMimeType"]);t!==void 0&&m!=null&&s(t,["parameters","outputOptions","mimeType"],m);const h=r(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&s(t,["parameters","outputOptions","compressionQuality"],h),r(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Mu(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["prompt"]);i!=null&&s(t,["instances[0]","prompt"],i);const a=r(e,["config"]);return a!=null&&s(t,["config"],Iu(o,a,t)),t}function wu(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function Ru(o,e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const a=r(e,["pageToken"]);t!==void 0&&a!=null&&s(t,["_query","pageToken"],a);const l=r(e,["filter"]);t!==void 0&&l!=null&&s(t,["_query","filter"],l);const u=r(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Mo(o,u)),n}function Pu(o,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],Ru(o,n,t)),t}function Nu(o,e,t){const n={},i=r(e,["displayName"]);t!==void 0&&i!=null&&s(t,["displayName"],i);const a=r(e,["description"]);t!==void 0&&a!=null&&s(t,["description"],a);const l=r(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&s(t,["defaultCheckpointId"],l),n}function ku(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],Nu(o,i,t)),t}function Du(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function Vu(o,e){const t={};if(r(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Lu(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["contents"]);if(i!=null){let l=Q(o,i);Array.isArray(l)&&(l=l.map(u=>gt(o,u))),s(t,["contents"],l)}const a=r(e,["config"]);return a!=null&&s(t,["config"],Vu(o,a)),t}function Fu(o,e){const t={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(e,["imageBytes"]);n!=null&&s(t,["bytesBase64Encoded"],fe(o,n));const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Uu(o,e,t){const n={},i=r(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&s(t,["parameters","sampleCount"],i),r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=r(e,["durationSeconds"]);if(t!==void 0&&a!=null&&s(t,["parameters","durationSeconds"],a),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=r(e,["aspectRatio"]);if(t!==void 0&&l!=null&&s(t,["parameters","aspectRatio"],l),r(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=r(e,["personGeneration"]);if(t!==void 0&&u!=null&&s(t,["parameters","personGeneration"],u),r(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=r(e,["negativePrompt"]);if(t!==void 0&&d!=null&&s(t,["parameters","negativePrompt"],d),r(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(r(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return n}function Gu(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["prompt"]);i!=null&&s(t,["instances[0]","prompt"],i);const a=r(e,["image"]);a!=null&&s(t,["instances[0]","image"],Fu(o,a));const l=r(e,["config"]);return l!=null&&s(t,["config"],Uu(o,l,t)),t}function bu(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function qu(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["data"]);i!=null&&s(t,["data"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function Bu(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function $u(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],bu(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],qu(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],Bu(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function Pe(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>$u(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function Hu(o,e){const t={},n=r(e,["anyOf"]);n!=null&&s(t,["anyOf"],n);const i=r(e,["default"]);i!=null&&s(t,["default"],i);const a=r(e,["description"]);a!=null&&s(t,["description"],a);const l=r(e,["enum"]);l!=null&&s(t,["enum"],l);const u=r(e,["example"]);u!=null&&s(t,["example"],u);const d=r(e,["format"]);d!=null&&s(t,["format"],d);const c=r(e,["items"]);c!=null&&s(t,["items"],c);const f=r(e,["maxItems"]);f!=null&&s(t,["maxItems"],f);const p=r(e,["maxLength"]);p!=null&&s(t,["maxLength"],p);const m=r(e,["maxProperties"]);m!=null&&s(t,["maxProperties"],m);const h=r(e,["maximum"]);h!=null&&s(t,["maximum"],h);const g=r(e,["minItems"]);g!=null&&s(t,["minItems"],g);const y=r(e,["minLength"]);y!=null&&s(t,["minLength"],y);const _=r(e,["minProperties"]);_!=null&&s(t,["minProperties"],_);const E=r(e,["minimum"]);E!=null&&s(t,["minimum"],E);const x=r(e,["nullable"]);x!=null&&s(t,["nullable"],x);const R=r(e,["pattern"]);R!=null&&s(t,["pattern"],R);const D=r(e,["properties"]);D!=null&&s(t,["properties"],D);const V=r(e,["propertyOrdering"]);V!=null&&s(t,["propertyOrdering"],V);const L=r(e,["required"]);L!=null&&s(t,["required"],L);const G=r(e,["title"]);G!=null&&s(t,["title"],G);const H=r(e,["type"]);return H!=null&&s(t,["type"],H),t}function Ju(o,e){const t={},n=r(e,["featureSelectionPreference"]);return n!=null&&s(t,["featureSelectionPreference"],n),t}function Ou(o,e){const t={},n=r(e,["method"]);n!=null&&s(t,["method"],n);const i=r(e,["category"]);i!=null&&s(t,["category"],i);const a=r(e,["threshold"]);return a!=null&&s(t,["threshold"],a),t}function Zu(o,e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&s(t,["description"],n);const i=r(e,["name"]);i!=null&&s(t,["name"],i);const a=r(e,["parameters"]);a!=null&&s(t,["parameters"],a);const l=r(e,["response"]);return l!=null&&s(t,["response"],l),t}function Wu(o,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function Yu(o,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Wu(o,n)),t}function Ku(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function zu(o,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],Ku(o,n)),t}function Xu(){return{}}function Qu(o,e){const t={},n=r(e,["apiKeyString"]);return n!=null&&s(t,["apiKeyString"],n),t}function ju(o,e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&s(t,["apiKeyConfig"],Qu(o,n));const i=r(e,["authType"]);i!=null&&s(t,["authType"],i);const a=r(e,["googleServiceAccountConfig"]);a!=null&&s(t,["googleServiceAccountConfig"],a);const l=r(e,["httpBasicAuthConfig"]);l!=null&&s(t,["httpBasicAuthConfig"],l);const u=r(e,["oauthConfig"]);u!=null&&s(t,["oauthConfig"],u);const d=r(e,["oidcConfig"]);return d!=null&&s(t,["oidcConfig"],d),t}function ec(o,e){const t={},n=r(e,["authConfig"]);return n!=null&&s(t,["authConfig"],ju(o,n)),t}function Fo(o,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>Zu(o,p))),s(t,["functionDeclarations"],f)}const i=r(e,["retrieval"]);i!=null&&s(t,["retrieval"],i);const a=r(e,["googleSearch"]);a!=null&&s(t,["googleSearch"],Yu(o,a));const l=r(e,["googleSearchRetrieval"]);l!=null&&s(t,["googleSearchRetrieval"],zu(o,l)),r(e,["enterpriseWebSearch"])!=null&&s(t,["enterpriseWebSearch"],Xu());const d=r(e,["googleMaps"]);if(d!=null&&s(t,["googleMaps"],ec(o,d)),r(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const c=r(e,["codeExecution"]);return c!=null&&s(t,["codeExecution"],c),t}function tc(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&s(t,["allowedFunctionNames"],i),t}function nc(o,e){const t={},n=r(e,["latitude"]);n!=null&&s(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&s(t,["longitude"],i),t}function oc(o,e){const t={},n=r(e,["latLng"]);n!=null&&s(t,["latLng"],nc(o,n));const i=r(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function ic(o,e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&s(t,["functionCallingConfig"],tc(o,n));const i=r(e,["retrievalConfig"]);return i!=null&&s(t,["retrievalConfig"],oc(o,i)),t}function rc(o,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function sc(o,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],rc(o,n)),t}function ac(o,e){const t={},n=r(e,["voiceConfig"]);if(n!=null&&s(t,["voiceConfig"],sc(o,n)),r(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=r(e,["languageCode"]);return i!=null&&s(t,["languageCode"],i),t}function lc(o,e){const t={},n=r(e,["includeThoughts"]);n!=null&&s(t,["includeThoughts"],n);const i=r(e,["thinkingBudget"]);return i!=null&&s(t,["thinkingBudget"],i),t}function uc(o,e,t){const n={},i=r(e,["systemInstruction"]);t!==void 0&&i!=null&&s(t,["systemInstruction"],Pe(o,O(o,i)));const a=r(e,["temperature"]);a!=null&&s(n,["temperature"],a);const l=r(e,["topP"]);l!=null&&s(n,["topP"],l);const u=r(e,["topK"]);u!=null&&s(n,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&s(n,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&s(n,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&s(n,["stopSequences"],f);const p=r(e,["responseLogprobs"]);p!=null&&s(n,["responseLogprobs"],p);const m=r(e,["logprobs"]);m!=null&&s(n,["logprobs"],m);const h=r(e,["presencePenalty"]);h!=null&&s(n,["presencePenalty"],h);const g=r(e,["frequencyPenalty"]);g!=null&&s(n,["frequencyPenalty"],g);const y=r(e,["seed"]);y!=null&&s(n,["seed"],y);const _=r(e,["responseMimeType"]);_!=null&&s(n,["responseMimeType"],_);const E=r(e,["responseSchema"]);E!=null&&s(n,["responseSchema"],Hu(o,ft(o,E)));const x=r(e,["routingConfig"]);x!=null&&s(n,["routingConfig"],x);const R=r(e,["modelSelectionConfig"]);R!=null&&s(n,["modelConfig"],Ju(o,R));const D=r(e,["safetySettings"]);if(t!==void 0&&D!=null){let oe=D;Array.isArray(oe)&&(oe=oe.map(yt=>Ou(o,yt))),s(t,["safetySettings"],oe)}const V=r(e,["tools"]);if(t!==void 0&&V!=null){let oe=ze(o,V);Array.isArray(oe)&&(oe=oe.map(yt=>Fo(o,Ke(o,yt)))),s(t,["tools"],oe)}const L=r(e,["toolConfig"]);t!==void 0&&L!=null&&s(t,["toolConfig"],ic(o,L));const G=r(e,["labels"]);t!==void 0&&G!=null&&s(t,["labels"],G);const H=r(e,["cachedContent"]);t!==void 0&&H!=null&&s(t,["cachedContent"],de(o,H));const P=r(e,["responseModalities"]);P!=null&&s(n,["responseModalities"],P);const F=r(e,["mediaResolution"]);F!=null&&s(n,["mediaResolution"],F);const W=r(e,["speechConfig"]);W!=null&&s(n,["speechConfig"],ac(o,xo(o,W)));const Bt=r(e,["audioTimestamp"]);Bt!=null&&s(n,["audioTimestamp"],Bt);const $t=r(e,["thinkingConfig"]);return $t!=null&&s(n,["thinkingConfig"],lc(o,$t)),n}function Xn(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["contents"]);if(i!=null){let l=Q(o,i);Array.isArray(l)&&(l=l.map(u=>Pe(o,u))),s(t,["contents"],l)}const a=r(e,["config"]);return a!=null&&s(t,["generationConfig"],uc(o,a,t)),t}function cc(o,e,t){const n={},i=r(e,["taskType"]);t!==void 0&&i!=null&&s(t,["instances[]","task_type"],i);const a=r(e,["title"]);t!==void 0&&a!=null&&s(t,["instances[]","title"],a);const l=r(e,["outputDimensionality"]);t!==void 0&&l!=null&&s(t,["parameters","outputDimensionality"],l);const u=r(e,["mimeType"]);t!==void 0&&u!=null&&s(t,["instances[]","mimeType"],u);const d=r(e,["autoTruncate"]);return t!==void 0&&d!=null&&s(t,["parameters","autoTruncate"],d),n}function dc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["contents"]);i!=null&&s(t,["instances[]","content"],So(o,i));const a=r(e,["config"]);return a!=null&&s(t,["config"],cc(o,a,t)),t}function fc(o,e,t){const n={},i=r(e,["outputGcsUri"]);t!==void 0&&i!=null&&s(t,["parameters","storageUri"],i);const a=r(e,["negativePrompt"]);t!==void 0&&a!=null&&s(t,["parameters","negativePrompt"],a);const l=r(e,["numberOfImages"]);t!==void 0&&l!=null&&s(t,["parameters","sampleCount"],l);const u=r(e,["aspectRatio"]);t!==void 0&&u!=null&&s(t,["parameters","aspectRatio"],u);const d=r(e,["guidanceScale"]);t!==void 0&&d!=null&&s(t,["parameters","guidanceScale"],d);const c=r(e,["seed"]);t!==void 0&&c!=null&&s(t,["parameters","seed"],c);const f=r(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&s(t,["parameters","safetySetting"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&s(t,["parameters","personGeneration"],p);const m=r(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&s(t,["parameters","includeSafetyAttributes"],m);const h=r(e,["includeRaiReason"]);t!==void 0&&h!=null&&s(t,["parameters","includeRaiReason"],h);const g=r(e,["language"]);t!==void 0&&g!=null&&s(t,["parameters","language"],g);const y=r(e,["outputMimeType"]);t!==void 0&&y!=null&&s(t,["parameters","outputOptions","mimeType"],y);const _=r(e,["outputCompressionQuality"]);t!==void 0&&_!=null&&s(t,["parameters","outputOptions","compressionQuality"],_);const E=r(e,["addWatermark"]);t!==void 0&&E!=null&&s(t,["parameters","addWatermark"],E);const x=r(e,["enhancePrompt"]);return t!==void 0&&x!=null&&s(t,["parameters","enhancePrompt"],x),n}function pc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["prompt"]);i!=null&&s(t,["instances[0]","prompt"],i);const a=r(e,["config"]);return a!=null&&s(t,["config"],fc(o,a,t)),t}function Ut(o,e){const t={},n=r(e,["gcsUri"]);n!=null&&s(t,["gcsUri"],n);const i=r(e,["imageBytes"]);i!=null&&s(t,["bytesBase64Encoded"],fe(o,i));const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function mc(o,e){const t={},n=r(e,["maskMode"]);n!=null&&s(t,["maskMode"],n);const i=r(e,["segmentationClasses"]);i!=null&&s(t,["maskClasses"],i);const a=r(e,["maskDilation"]);return a!=null&&s(t,["dilation"],a),t}function hc(o,e){const t={},n=r(e,["controlType"]);n!=null&&s(t,["controlType"],n);const i=r(e,["enableControlImageComputation"]);return i!=null&&s(t,["computeControl"],i),t}function gc(o,e){const t={},n=r(e,["styleDescription"]);return n!=null&&s(t,["styleDescription"],n),t}function yc(o,e){const t={},n=r(e,["subjectType"]);n!=null&&s(t,["subjectType"],n);const i=r(e,["subjectDescription"]);return i!=null&&s(t,["subjectDescription"],i),t}function vc(o,e){const t={},n=r(e,["referenceImage"]);n!=null&&s(t,["referenceImage"],Ut(o,n));const i=r(e,["referenceId"]);i!=null&&s(t,["referenceId"],i);const a=r(e,["referenceType"]);a!=null&&s(t,["referenceType"],a);const l=r(e,["maskImageConfig"]);l!=null&&s(t,["maskImageConfig"],mc(o,l));const u=r(e,["controlImageConfig"]);u!=null&&s(t,["controlImageConfig"],hc(o,u));const d=r(e,["styleImageConfig"]);d!=null&&s(t,["styleImageConfig"],gc(o,d));const c=r(e,["subjectImageConfig"]);return c!=null&&s(t,["subjectImageConfig"],yc(o,c)),t}function Tc(o,e,t){const n={},i=r(e,["outputGcsUri"]);t!==void 0&&i!=null&&s(t,["parameters","storageUri"],i);const a=r(e,["negativePrompt"]);t!==void 0&&a!=null&&s(t,["parameters","negativePrompt"],a);const l=r(e,["numberOfImages"]);t!==void 0&&l!=null&&s(t,["parameters","sampleCount"],l);const u=r(e,["aspectRatio"]);t!==void 0&&u!=null&&s(t,["parameters","aspectRatio"],u);const d=r(e,["guidanceScale"]);t!==void 0&&d!=null&&s(t,["parameters","guidanceScale"],d);const c=r(e,["seed"]);t!==void 0&&c!=null&&s(t,["parameters","seed"],c);const f=r(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&s(t,["parameters","safetySetting"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&s(t,["parameters","personGeneration"],p);const m=r(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&s(t,["parameters","includeSafetyAttributes"],m);const h=r(e,["includeRaiReason"]);t!==void 0&&h!=null&&s(t,["parameters","includeRaiReason"],h);const g=r(e,["language"]);t!==void 0&&g!=null&&s(t,["parameters","language"],g);const y=r(e,["outputMimeType"]);t!==void 0&&y!=null&&s(t,["parameters","outputOptions","mimeType"],y);const _=r(e,["outputCompressionQuality"]);t!==void 0&&_!=null&&s(t,["parameters","outputOptions","compressionQuality"],_);const E=r(e,["editMode"]);t!==void 0&&E!=null&&s(t,["parameters","editMode"],E);const x=r(e,["baseSteps"]);return t!==void 0&&x!=null&&s(t,["parameters","editConfig","baseSteps"],x),n}function Cc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["prompt"]);i!=null&&s(t,["instances[0]","prompt"],i);const a=r(e,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>vc(o,d))),s(t,["instances[0]","referenceImages"],u)}const l=r(e,["config"]);return l!=null&&s(t,["config"],Tc(o,l,t)),t}function _c(o,e,t){const n={},i=r(e,["includeRaiReason"]);t!==void 0&&i!=null&&s(t,["parameters","includeRaiReason"],i);const a=r(e,["outputMimeType"]);t!==void 0&&a!=null&&s(t,["parameters","outputOptions","mimeType"],a);const l=r(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&s(t,["parameters","outputOptions","compressionQuality"],l);const u=r(e,["numberOfImages"]);t!==void 0&&u!=null&&s(t,["parameters","sampleCount"],u);const d=r(e,["mode"]);return t!==void 0&&d!=null&&s(t,["parameters","mode"],d),n}function Ec(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["image"]);i!=null&&s(t,["instances[0]","image"],Ut(o,i));const a=r(e,["upscaleFactor"]);a!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],a);const l=r(e,["config"]);return l!=null&&s(t,["config"],_c(o,l,t)),t}function Sc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function xc(o,e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const a=r(e,["pageToken"]);t!==void 0&&a!=null&&s(t,["_query","pageToken"],a);const l=r(e,["filter"]);t!==void 0&&l!=null&&s(t,["_query","filter"],l);const u=r(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Mo(o,u)),n}function Ac(o,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],xc(o,n,t)),t}function Ic(o,e,t){const n={},i=r(e,["displayName"]);t!==void 0&&i!=null&&s(t,["displayName"],i);const a=r(e,["description"]);t!==void 0&&a!=null&&s(t,["description"],a);const l=r(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&s(t,["defaultCheckpointId"],l),n}function Mc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],Ic(o,i,t)),t}function wc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","name"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function Rc(o,e,t){const n={},i=r(e,["systemInstruction"]);t!==void 0&&i!=null&&s(t,["systemInstruction"],Pe(o,O(o,i)));const a=r(e,["tools"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Fo(o,d))),s(t,["tools"],u)}const l=r(e,["generationConfig"]);return t!==void 0&&l!=null&&s(t,["generationConfig"],l),n}function Pc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["contents"]);if(i!=null){let l=Q(o,i);Array.isArray(l)&&(l=l.map(u=>Pe(o,u))),s(t,["contents"],l)}const a=r(e,["config"]);return a!=null&&s(t,["config"],Rc(o,a,t)),t}function Nc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["contents"]);if(i!=null){let l=Q(o,i);Array.isArray(l)&&(l=l.map(u=>Pe(o,u))),s(t,["contents"],l)}const a=r(e,["config"]);return a!=null&&s(t,["config"],a),t}function kc(o,e,t){const n={},i=r(e,["numberOfVideos"]);t!==void 0&&i!=null&&s(t,["parameters","sampleCount"],i);const a=r(e,["outputGcsUri"]);t!==void 0&&a!=null&&s(t,["parameters","storageUri"],a);const l=r(e,["fps"]);t!==void 0&&l!=null&&s(t,["parameters","fps"],l);const u=r(e,["durationSeconds"]);t!==void 0&&u!=null&&s(t,["parameters","durationSeconds"],u);const d=r(e,["seed"]);t!==void 0&&d!=null&&s(t,["parameters","seed"],d);const c=r(e,["aspectRatio"]);t!==void 0&&c!=null&&s(t,["parameters","aspectRatio"],c);const f=r(e,["resolution"]);t!==void 0&&f!=null&&s(t,["parameters","resolution"],f);const p=r(e,["personGeneration"]);t!==void 0&&p!=null&&s(t,["parameters","personGeneration"],p);const m=r(e,["pubsubTopic"]);t!==void 0&&m!=null&&s(t,["parameters","pubsubTopic"],m);const h=r(e,["negativePrompt"]);t!==void 0&&h!=null&&s(t,["parameters","negativePrompt"],h);const g=r(e,["enhancePrompt"]);t!==void 0&&g!=null&&s(t,["parameters","enhancePrompt"],g);const y=r(e,["generateAudio"]);return t!==void 0&&y!=null&&s(t,["parameters","generateAudio"],y),n}function Dc(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["_url","model"],q(o,n));const i=r(e,["prompt"]);i!=null&&s(t,["instances[0]","prompt"],i);const a=r(e,["image"]);a!=null&&s(t,["instances[0]","image"],Ut(o,a));const l=r(e,["config"]);return l!=null&&s(t,["config"],kc(o,l,t)),t}function Vc(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function Lc(o,e){const t={},n=r(e,["data"]);n!=null&&s(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Fc(o,e){const t={},n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Uc(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],Vc(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],Lc(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],Fc(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function Gc(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Uc(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function bc(o,e){const t={},n=r(e,["citationSources"]);return n!=null&&s(t,["citations"],n),t}function qc(o,e){const t={},n=r(e,["retrievedUrl"]);n!=null&&s(t,["retrievedUrl"],n);const i=r(e,["urlRetrievalStatus"]);return i!=null&&s(t,["urlRetrievalStatus"],i),t}function Bc(o,e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>qc(o,a))),s(t,["urlMetadata"],i)}return t}function $c(o,e){const t={},n=r(e,["content"]);n!=null&&s(t,["content"],Gc(o,n));const i=r(e,["citationMetadata"]);i!=null&&s(t,["citationMetadata"],bc(o,i));const a=r(e,["tokenCount"]);a!=null&&s(t,["tokenCount"],a);const l=r(e,["finishReason"]);l!=null&&s(t,["finishReason"],l);const u=r(e,["urlContextMetadata"]);u!=null&&s(t,["urlContextMetadata"],Bc(o,u));const d=r(e,["avgLogprobs"]);d!=null&&s(t,["avgLogprobs"],d);const c=r(e,["groundingMetadata"]);c!=null&&s(t,["groundingMetadata"],c);const f=r(e,["index"]);f!=null&&s(t,["index"],f);const p=r(e,["logprobsResult"]);p!=null&&s(t,["logprobsResult"],p);const m=r(e,["safetyRatings"]);return m!=null&&s(t,["safetyRatings"],m),t}function Qn(o,e){const t={},n=r(e,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>$c(o,d))),s(t,["candidates"],u)}const i=r(e,["modelVersion"]);i!=null&&s(t,["modelVersion"],i);const a=r(e,["promptFeedback"]);a!=null&&s(t,["promptFeedback"],a);const l=r(e,["usageMetadata"]);return l!=null&&s(t,["usageMetadata"],l),t}function Hc(o,e){const t={},n=r(e,["values"]);return n!=null&&s(t,["values"],n),t}function Jc(){return{}}function Oc(o,e){const t={},n=r(e,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Hc(o,l))),s(t,["embeddings"],a)}return r(e,["metadata"])!=null&&s(t,["metadata"],Jc()),t}function Zc(o,e){const t={},n=r(e,["bytesBase64Encoded"]);n!=null&&s(t,["imageBytes"],fe(o,n));const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Uo(o,e){const t={},n=r(e,["safetyAttributes","categories"]);n!=null&&s(t,["categories"],n);const i=r(e,["safetyAttributes","scores"]);i!=null&&s(t,["scores"],i);const a=r(e,["contentType"]);return a!=null&&s(t,["contentType"],a),t}function Wc(o,e){const t={},n=r(e,["_self"]);n!=null&&s(t,["image"],Zc(o,n));const i=r(e,["raiFilteredReason"]);i!=null&&s(t,["raiFilteredReason"],i);const a=r(e,["_self"]);return a!=null&&s(t,["safetyAttributes"],Uo(o,a)),t}function Yc(o,e){const t={},n=r(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Wc(o,l))),s(t,["generatedImages"],a)}const i=r(e,["positivePromptSafetyAttributes"]);return i!=null&&s(t,["positivePromptSafetyAttributes"],Uo(o,i)),t}function Kc(o,e){const t={},n=r(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const i=r(e,["createTime"]);i!=null&&s(t,["createTime"],i);const a=r(e,["updateTime"]);return a!=null&&s(t,["updateTime"],a),t}function Pt(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["displayName"]);i!=null&&s(t,["displayName"],i);const a=r(e,["description"]);a!=null&&s(t,["description"],a);const l=r(e,["version"]);l!=null&&s(t,["version"],l);const u=r(e,["_self"]);u!=null&&s(t,["tunedModelInfo"],Kc(o,u));const d=r(e,["inputTokenLimit"]);d!=null&&s(t,["inputTokenLimit"],d);const c=r(e,["outputTokenLimit"]);c!=null&&s(t,["outputTokenLimit"],c);const f=r(e,["supportedGenerationMethods"]);return f!=null&&s(t,["supportedActions"],f),t}function zc(o,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=r(e,["_self"]);if(i!=null){let a=wo(o,i);Array.isArray(a)&&(a=a.map(l=>Pt(o,l))),s(t,["models"],a)}return t}function Xc(){return{}}function Qc(o,e){const t={},n=r(e,["totalTokens"]);n!=null&&s(t,["totalTokens"],n);const i=r(e,["cachedContentTokenCount"]);return i!=null&&s(t,["cachedContentTokenCount"],i),t}function jc(o,e){const t={},n=r(e,["video","uri"]);n!=null&&s(t,["uri"],n);const i=r(e,["video","encodedVideo"]);i!=null&&s(t,["videoBytes"],fe(o,i));const a=r(e,["encoding"]);return a!=null&&s(t,["mimeType"],a),t}function ed(o,e){const t={},n=r(e,["_self"]);return n!=null&&s(t,["video"],jc(o,n)),t}function td(o,e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>ed(o,u))),s(t,["generatedVideos"],l)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&s(t,["raiMediaFilteredCount"],i);const a=r(e,["raiMediaFilteredReasons"]);return a!=null&&s(t,["raiMediaFilteredReasons"],a),t}function nd(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["metadata"]);i!=null&&s(t,["metadata"],i);const a=r(e,["done"]);a!=null&&s(t,["done"],a);const l=r(e,["error"]);l!=null&&s(t,["error"],l);const u=r(e,["response","generateVideoResponse"]);return u!=null&&s(t,["response"],td(o,u)),t}function od(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function id(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["data"]);i!=null&&s(t,["data"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function rd(o,e){const t={},n=r(e,["displayName"]);n!=null&&s(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&s(t,["fileUri"],i);const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function sd(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],od(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],id(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],rd(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function ad(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>sd(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function ld(o,e){const t={},n=r(e,["citations"]);return n!=null&&s(t,["citations"],n),t}function ud(o,e){const t={},n=r(e,["content"]);n!=null&&s(t,["content"],ad(o,n));const i=r(e,["citationMetadata"]);i!=null&&s(t,["citationMetadata"],ld(o,i));const a=r(e,["finishMessage"]);a!=null&&s(t,["finishMessage"],a);const l=r(e,["finishReason"]);l!=null&&s(t,["finishReason"],l);const u=r(e,["avgLogprobs"]);u!=null&&s(t,["avgLogprobs"],u);const d=r(e,["groundingMetadata"]);d!=null&&s(t,["groundingMetadata"],d);const c=r(e,["index"]);c!=null&&s(t,["index"],c);const f=r(e,["logprobsResult"]);f!=null&&s(t,["logprobsResult"],f);const p=r(e,["safetyRatings"]);return p!=null&&s(t,["safetyRatings"],p),t}function jn(o,e){const t={},n=r(e,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>ud(o,f))),s(t,["candidates"],c)}const i=r(e,["createTime"]);i!=null&&s(t,["createTime"],i);const a=r(e,["responseId"]);a!=null&&s(t,["responseId"],a);const l=r(e,["modelVersion"]);l!=null&&s(t,["modelVersion"],l);const u=r(e,["promptFeedback"]);u!=null&&s(t,["promptFeedback"],u);const d=r(e,["usageMetadata"]);return d!=null&&s(t,["usageMetadata"],d),t}function cd(o,e){const t={},n=r(e,["truncated"]);n!=null&&s(t,["truncated"],n);const i=r(e,["token_count"]);return i!=null&&s(t,["tokenCount"],i),t}function dd(o,e){const t={},n=r(e,["values"]);n!=null&&s(t,["values"],n);const i=r(e,["statistics"]);return i!=null&&s(t,["statistics"],cd(o,i)),t}function fd(o,e){const t={},n=r(e,["billableCharacterCount"]);return n!=null&&s(t,["billableCharacterCount"],n),t}function pd(o,e){const t={},n=r(e,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>dd(o,l))),s(t,["embeddings"],a)}const i=r(e,["metadata"]);return i!=null&&s(t,["metadata"],fd(o,i)),t}function md(o,e){const t={},n=r(e,["gcsUri"]);n!=null&&s(t,["gcsUri"],n);const i=r(e,["bytesBase64Encoded"]);i!=null&&s(t,["imageBytes"],fe(o,i));const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function Go(o,e){const t={},n=r(e,["safetyAttributes","categories"]);n!=null&&s(t,["categories"],n);const i=r(e,["safetyAttributes","scores"]);i!=null&&s(t,["scores"],i);const a=r(e,["contentType"]);return a!=null&&s(t,["contentType"],a),t}function Gt(o,e){const t={},n=r(e,["_self"]);n!=null&&s(t,["image"],md(o,n));const i=r(e,["raiFilteredReason"]);i!=null&&s(t,["raiFilteredReason"],i);const a=r(e,["_self"]);a!=null&&s(t,["safetyAttributes"],Go(o,a));const l=r(e,["prompt"]);return l!=null&&s(t,["enhancedPrompt"],l),t}function hd(o,e){const t={},n=r(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Gt(o,l))),s(t,["generatedImages"],a)}const i=r(e,["positivePromptSafetyAttributes"]);return i!=null&&s(t,["positivePromptSafetyAttributes"],Go(o,i)),t}function gd(o,e){const t={},n=r(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Gt(o,a))),s(t,["generatedImages"],i)}return t}function yd(o,e){const t={},n=r(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Gt(o,a))),s(t,["generatedImages"],i)}return t}function vd(o,e){const t={},n=r(e,["endpoint"]);n!=null&&s(t,["name"],n);const i=r(e,["deployedModelId"]);return i!=null&&s(t,["deployedModelId"],i),t}function Td(o,e){const t={},n=r(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(t,["baseModel"],n);const i=r(e,["createTime"]);i!=null&&s(t,["createTime"],i);const a=r(e,["updateTime"]);return a!=null&&s(t,["updateTime"],a),t}function Cd(o,e){const t={},n=r(e,["checkpointId"]);n!=null&&s(t,["checkpointId"],n);const i=r(e,["epoch"]);i!=null&&s(t,["epoch"],i);const a=r(e,["step"]);return a!=null&&s(t,["step"],a),t}function Nt(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["displayName"]);i!=null&&s(t,["displayName"],i);const a=r(e,["description"]);a!=null&&s(t,["description"],a);const l=r(e,["versionId"]);l!=null&&s(t,["version"],l);const u=r(e,["deployedModels"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(h=>vd(o,h))),s(t,["endpoints"],m)}const d=r(e,["labels"]);d!=null&&s(t,["labels"],d);const c=r(e,["_self"]);c!=null&&s(t,["tunedModelInfo"],Td(o,c));const f=r(e,["defaultCheckpointId"]);f!=null&&s(t,["defaultCheckpointId"],f);const p=r(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>Cd(o,h))),s(t,["checkpoints"],m)}return t}function _d(o,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=r(e,["_self"]);if(i!=null){let a=wo(o,i);Array.isArray(a)&&(a=a.map(l=>Nt(o,l))),s(t,["models"],a)}return t}function Ed(){return{}}function Sd(o,e){const t={},n=r(e,["totalTokens"]);return n!=null&&s(t,["totalTokens"],n),t}function xd(o,e){const t={},n=r(e,["tokensInfo"]);return n!=null&&s(t,["tokensInfo"],n),t}function Ad(o,e){const t={},n=r(e,["gcsUri"]);n!=null&&s(t,["uri"],n);const i=r(e,["bytesBase64Encoded"]);i!=null&&s(t,["videoBytes"],fe(o,i));const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function Id(o,e){const t={},n=r(e,["_self"]);return n!=null&&s(t,["video"],Ad(o,n)),t}function Md(o,e){const t={},n=r(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Id(o,u))),s(t,["generatedVideos"],l)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&s(t,["raiMediaFilteredCount"],i);const a=r(e,["raiMediaFilteredReasons"]);return a!=null&&s(t,["raiMediaFilteredReasons"],a),t}function wd(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["metadata"]);i!=null&&s(t,["metadata"],i);const a=r(e,["done"]);a!=null&&s(t,["done"],a);const l=r(e,["error"]);l!=null&&s(t,["error"],l);const u=r(e,["response"]);return u!=null&&s(t,["response"],Md(o,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rd="Content-Type",Pd="X-Server-Timeout",Nd="User-Agent",kt="x-goog-api-client",kd="1.3.0",Dd=`google-genai-sdk/${kd}`,Vd="v1beta1",Ld="v1beta",eo=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class bo extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Dt extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class Fd{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Vd,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Ld,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const i=[this.getRequestUrlInternal(t)];return n&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))i.searchParams.append(l,String(u));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(t))typeof a=="object"?n[i]=Object.assign(Object.assign({},n[i]),a):a!==void 0&&(n[i]=a);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const i=new AbortController,a=i.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>i.abort(),t.timeout),n&&n.addEventListener("abort",()=>{i.abort()}),e.signal=a}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async i=>(await to(i),new It(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async i=>(await to(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Se(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield B(i.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=a.decode(d);try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),h=m.status,g=m.code,y=`got status: ${h}. ${JSON.stringify(p)}`;if(g>=400&&g<500)throw new bo(y);if(g>=500&&g<600)throw new Dt(y)}}catch(p){const m=p;if(m.name==="ClientError"||m.name==="ServerError")throw p}l+=c;let f=l.match(eo);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield B(new It(m)),l=l.slice(f[0].length),f=l.match(eo)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=Dd+" "+this.clientOptions.userAgentExtra;return e[Nd]=t,e[kt]=t,e[Rd]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,i]of Object.entries(e.headers))t.append(n,i);e.timeout&&e.timeout>0&&t.append(Pd,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);i.sizeBytes=String(l.size);const u=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const d=await this.fetchUploadUrl(i,t);return a.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},l=await this.request({path:I("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:i});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(n=l==null?void 0:l.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function to(o){var e;if(o===void 0)throw new Dt("response is undefined");if(!o.ok){const t=o.status,n=o.statusText;let i;!((e=o.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await o.json():i={error:{message:await o.text(),code:o.status,status:o.statusText}};const a=`got status: ${t} ${n}. ${JSON.stringify(i)}`;throw t>=400&&t<500?new bo(a):t>=500&&t<600?new Dt(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ud="mcp_used/unknown";function qo(o){for(const e of o)if(bt(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Bo(o){var e;const t=(e=o[kt])!==null&&e!==void 0?e:"";o[kt]=(t+` ${Ud}`).trimStart()}function Gd(o){var e,t,n;return(n=(t=(e=o.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>bt(i)))!==null&&n!==void 0?n:!1}function bd(o){var e,t,n;return(n=(t=(e=o.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>!bt(i)))!==null&&n!==void 0?n:!1}function bt(o){return o!==null&&typeof o=="object"&&o instanceof qt}function qd(o,e=100){return Se(this,arguments,function*(){let n,i=0;for(;i<e;){const a=yield B(o.listTools({cursor:n}));for(const l of a.tools)yield yield B(l),i++;if(!a.nextCursor)break;n=a.nextCursor}})}class qt{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new qt(e,t)}async initialize(){var e,t,n,i;if(this.mcpTools.length>0)return;const a={},l=[];for(const f of this.mcpClients)try{for(var u=!0,d=(t=void 0,Ve(qd(f))),c;c=await d.next(),e=c.done,!e;u=!0){i=c.value,u=!1;const p=i;l.push(p);const m=p.name;if(a[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);a[m]=f}}catch(p){t={error:p}}finally{try{!u&&!e&&(n=d.return)&&await n.call(d)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Wr(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const a=await this.functionNameToMcpClient[n.name].callTool({name:n.name,arguments:n.args});t.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Bd(o,e,t){const n=new Vr;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data);const a=eu(o,i);Object.assign(n,a),e(n)}class $d{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=Od(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(R=>{c=R}),p=e.callbacks,m=function(){c({})},h=this.apiClient,g={onopen:m,onmessage:R=>{Bd(h,p.onmessage,R)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(R){},onclose:(n=p==null?void 0:p.onclose)!==null&&n!==void 0?n:function(R){}},y=this.webSocketFactory.create(d,Jd(l),g);y.connect(),await f;const _=q(this.apiClient,e.model),E=Do(this.apiClient,{model:_}),x=Rt(this.apiClient,{setup:E});return y.send(JSON.stringify(x)),new Hd(y,this.apiClient)}}class Hd{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=ml(this.apiClient,e),n=Vo(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=hl(this.apiClient,e),n=Rt(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=Rt(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ce.PLAY)}pause(){this.sendPlaybackControl(Ce.PAUSE)}stop(){this.sendPlaybackControl(Ce.STOP)}resetContext(){this.sendPlaybackControl(Ce.RESET_CONTEXT)}close(){this.conn.close()}}function Jd(o){const e={};return o.forEach((t,n)=>{e[n]=t}),e}function Od(o){const e=new Headers;for(const[t,n]of Object.entries(o))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zd="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Wd(o,e,t){const n=new Dr;let i;if(t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),o.isVertexAI()){const a=Ol(o,i);Object.assign(n,a)}else{const a=Jl(o,i);Object.assign(n,a)}e(n)}class Yd{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new $d(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,i,a,l,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&qo(e.config.tools)&&Bo(p);const m=Qd(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const P=this.apiClient.getApiKey();let F="BidiGenerateContent",W="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),F="BidiGenerateContentConstrained",W="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${W}=${P}`}let h=()=>{};const g=new Promise(P=>{h=P}),y=e.callbacks,_=function(){var P;(P=y==null?void 0:y.onopen)===null||P===void 0||P.call(y),h({})},E=this.apiClient,x={onopen:_,onmessage:P=>{Wd(E,y.onmessage,P)},onerror:(t=y==null?void 0:y.onerror)!==null&&t!==void 0?t:function(P){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(P){}},R=this.webSocketFactory.create(f,Xd(m),x);R.connect(),await g;let D=q(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const P=this.apiClient.getProject(),F=this.apiClient.getLocation();D=`projects/${P}/locations/${F}/`+D}let V={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ct.AUDIO]}:e.config.responseModalities=[ct.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],G=[];for(const P of L)if(this.isCallableTool(P)){const F=P;G.push(await F.tool())}else G.push(P);G.length>0&&(e.config.tools=G);const H={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=al(this.apiClient,H):V=sl(this.apiClient,H),delete V.config,R.send(JSON.stringify(V)),new zd(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Kd={turnComplete:!0};class zd{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=Q(e,t.turns),e.isVertexAI()?n=n.map(i=>Pe(e,i)):n=n.map(i=>gt(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Zd)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Kd),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:pl(this.apiClient,e)}:t={realtimeInput:fl(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Xd(o){const e={};return o.forEach((t,n)=>{e[n]=t}),e}function Qd(o){const e=new Headers;for(const[t,n]of Object.entries(o))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const no=10;function oo(o){var e,t,n;if(!((e=o==null?void 0:o.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const l of(t=o==null?void 0:o.tools)!==null&&t!==void 0?t:[])if(tt(l)){i=!0;break}if(!i)return!0;const a=(n=o==null?void 0:o.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function tt(o){return"callTool"in o&&typeof o.callTool=="function"}function io(o){var e;return!(!((e=o==null?void 0:o.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jd extends Re{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,i,a,l,u;const d=await this.processParamsForMcpUsage(t);if(!Gd(t)||oo(t.config))return await this.generateContentInternal(d);if(bd(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=Q(this.apiClient,d.contents),m=(a=(i=(n=d.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:no;let h=0;for(;h<m&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const g=c.candidates[0].content,y=[];for(const _ of(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(tt(_)){const x=await _.callTool(c.functionCalls);y.push(...x)}h++,f={role:"user",parts:y},d.contents=Q(this.apiClient,d.contents),d.contents.push(g),d.contents.push(f),io(d.config)&&(p.push(g),p.push(f))}return io(d.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async t=>{if(oo(t.config)){const n=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var i;let a;const l=[];if(n!=null&&n.generatedImages)for(const d of n.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((i=d==null?void 0:d.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let u;return a?u={generatedImages:l,positivePromptSafetyAttributes:a}:u={generatedImages:l},u}),this.list=async t=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new ht(Me.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(i)}}async processParamsForMcpUsage(e){var t,n,i;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>tt(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&qo(e.config.tools)){const d=(i=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Bo(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,n,i;const a=new Map;for(const l of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(tt(l)){const u=l,d=await u.tool();for(const c of(i=d.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(a.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);a.set(c.name,u)}}return a}async processAfcStream(e){var t,n,i;const a=(i=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&i!==void 0?i:no;let l=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,p){var m,h;return Se(this,arguments,function*(){for(var g,y,_,E;u<a;){l&&(u++,l=!1);const V=yield B(c.processParamsForMcpUsage(p)),L=yield B(c.generateContentStreamInternal(V)),G=[],H=[];try{for(var x=!0,R=(y=void 0,Ve(L)),D;D=yield B(R.next()),g=D.done,!g;x=!0){E=D.value,x=!1;const P=E;if(yield yield B(P),P.candidates&&(!((m=P.candidates[0])===null||m===void 0)&&m.content)){H.push(P.candidates[0].content);for(const F of(h=P.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<a&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const W=yield B(f.get(F.functionCall.name).callTool([F.functionCall]));G.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(P){y={error:P}}finally{try{!x&&!g&&(_=R.return)&&(yield B(_.call(R)))}finally{if(y)throw y.error}}if(G.length>0){l=!0;const P=new Ne;P.candidates=[{content:{role:"user",parts:G}}],yield yield B(P);const F=[];F.push(...H),F.push({role:"user",parts:G});const W=Q(c.apiClient,p.contents).concat(F);p.contents=W}else break}})}(this,d,e)}async generateContentInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Xn(this.apiClient,e);return u=I("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=jn(this.apiClient,f),m=new Ne;return Object.assign(m,p),m})}else{const c=zn(this.apiClient,e);return u=I("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Qn(this.apiClient,f),m=new Ne;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Xn(this.apiClient,e);u=I("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return l=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(p){return Se(this,arguments,function*(){var m,h,g,y;try{for(var _=!0,E=Ve(p),x;x=yield B(E.next()),m=x.done,!m;_=!0){y=x.value,_=!1;const D=jn(f,yield B(y.json())),V=new Ne;Object.assign(V,D),yield yield B(V)}}catch(R){h={error:R}}finally{try{!_&&!m&&(g=E.return)&&(yield B(g.call(E)))}finally{if(h)throw h.error}}})})}else{const c=zn(this.apiClient,e);u=I("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return l=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(p){return Se(this,arguments,function*(){var m,h,g,y;try{for(var _=!0,E=Ve(p),x;x=yield B(E.next()),m=x.done,!m;_=!0){y=x.value,_=!1;const D=Qn(f,yield B(y.json())),V=new Ne;Object.assign(V,D),yield yield B(V)}}catch(R){h={error:R}}finally{try{!_&&!m&&(g=E.return)&&(yield B(g.call(E)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=dc(this.apiClient,e);return u=I("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=pd(this.apiClient,f),m=new Pn;return Object.assign(m,p),m})}else{const c=Au(this.apiClient,e);return u=I("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Oc(this.apiClient,f),m=new Pn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=pc(this.apiClient,e);return u=I("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=hd(this.apiClient,f),m=new Nn;return Object.assign(m,p),m})}else{const c=Mu(this.apiClient,e);return u=I("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Yc(this.apiClient,f),m=new Nn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=Cc(this.apiClient,e);return a=I("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const c=gd(this.apiClient,d),f=new Mr;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=Ec(this.apiClient,e);return a=I("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const c=yd(this.apiClient,d),f=new wr;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Sc(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Nt(this.apiClient,f))}else{const c=wu(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Pt(this.apiClient,f))}}async listInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ac(this.apiClient,e);return u=I("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=_d(this.apiClient,f),m=new kn;return Object.assign(m,p),m})}else{const c=Pu(this.apiClient,e);return u=I("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=zc(this.apiClient,f),m=new kn;return Object.assign(m,p),m})}}async update(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Mc(this.apiClient,e);return u=I("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Nt(this.apiClient,f))}else{const c=ku(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Pt(this.apiClient,f))}}async delete(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=wc(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Ed(),p=new Dn;return Object.assign(p,f),p})}else{const c=Du(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Xc(),p=new Dn;return Object.assign(p,f),p})}}async countTokens(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Pc(this.apiClient,e);return u=I("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Sd(this.apiClient,f),m=new Vn;return Object.assign(m,p),m})}else{const c=Lu(this.apiClient,e);return u=I("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Qc(this.apiClient,f),m=new Vn;return Object.assign(m,p),m})}}async computeTokens(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=Nc(this.apiClient,e);return a=I("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const c=xd(this.apiClient,d),f=new Rr;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Dc(this.apiClient,e);return u=I("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>wd(this.apiClient,f))}else{const c=Gu(this.apiClient,e);return u=I("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>nd(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ef(o,e){const t={},n=r(e,["operationName"]);n!=null&&s(t,["_url","operationName"],n);const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function tf(o,e){const t={},n=r(e,["operationName"]);n!=null&&s(t,["_url","operationName"],n);const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function nf(o,e){const t={},n=r(e,["operationName"]);n!=null&&s(t,["operationName"],n);const i=r(e,["resourceName"]);i!=null&&s(t,["_url","resourceName"],i);const a=r(e,["config"]);return a!=null&&s(t,["config"],a),t}function of(o,e){const t={},n=r(e,["video","uri"]);n!=null&&s(t,["uri"],n);const i=r(e,["video","encodedVideo"]);i!=null&&s(t,["videoBytes"],fe(o,i));const a=r(e,["encoding"]);return a!=null&&s(t,["mimeType"],a),t}function rf(o,e){const t={},n=r(e,["_self"]);return n!=null&&s(t,["video"],of(o,n)),t}function sf(o,e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>rf(o,u))),s(t,["generatedVideos"],l)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&s(t,["raiMediaFilteredCount"],i);const a=r(e,["raiMediaFilteredReasons"]);return a!=null&&s(t,["raiMediaFilteredReasons"],a),t}function af(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["metadata"]);i!=null&&s(t,["metadata"],i);const a=r(e,["done"]);a!=null&&s(t,["done"],a);const l=r(e,["error"]);l!=null&&s(t,["error"],l);const u=r(e,["response","generateVideoResponse"]);return u!=null&&s(t,["response"],sf(o,u)),t}function lf(o,e){const t={},n=r(e,["gcsUri"]);n!=null&&s(t,["uri"],n);const i=r(e,["bytesBase64Encoded"]);i!=null&&s(t,["videoBytes"],fe(o,i));const a=r(e,["mimeType"]);return a!=null&&s(t,["mimeType"],a),t}function uf(o,e){const t={},n=r(e,["_self"]);return n!=null&&s(t,["video"],lf(o,n)),t}function cf(o,e){const t={},n=r(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>uf(o,u))),s(t,["generatedVideos"],l)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&s(t,["raiMediaFilteredCount"],i);const a=r(e,["raiMediaFilteredReasons"]);return a!=null&&s(t,["raiMediaFilteredReasons"],a),t}function ro(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["metadata"]);i!=null&&s(t,["metadata"],i);const a=r(e,["done"]);a!=null&&s(t,["done"],a);const l=r(e,["error"]);l!=null&&s(t,["error"],l);const u=r(e,["response"]);return u!=null&&s(t,["response"],cf(o,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class df extends Re{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let a;return n&&"httpOptions"in n&&(a=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=tf(this.apiClient,e);return u=I("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>ro(this.apiClient,f))}else{const c=ef(this.apiClient,e);return u=I("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>af(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=nf(this.apiClient,e);return a=I("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>ro(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ff(o,e){const t={},n=r(e,["voiceName"]);return n!=null&&s(t,["voiceName"],n),t}function $o(o,e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&s(t,["prebuiltVoiceConfig"],ff(o,n)),t}function pf(o,e){const t={},n=r(e,["speaker"]);n!=null&&s(t,["speaker"],n);const i=r(e,["voiceConfig"]);return i!=null&&s(t,["voiceConfig"],$o(o,i)),t}function mf(o,e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>pf(o,a))),s(t,["speakerVoiceConfigs"],i)}return t}function hf(o,e){const t={},n=r(e,["voiceConfig"]);n!=null&&s(t,["voiceConfig"],$o(o,n));const i=r(e,["multiSpeakerVoiceConfig"]);i!=null&&s(t,["multiSpeakerVoiceConfig"],mf(o,i));const a=r(e,["languageCode"]);return a!=null&&s(t,["languageCode"],a),t}function gf(o,e){const t={},n=r(e,["fps"]);n!=null&&s(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&s(t,["endOffset"],i);const a=r(e,["startOffset"]);return a!=null&&s(t,["startOffset"],a),t}function yf(o,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&s(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function vf(o,e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&s(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&s(t,["mimeType"],i),t}function Tf(o,e){const t={},n=r(e,["videoMetadata"]);n!=null&&s(t,["videoMetadata"],gf(o,n));const i=r(e,["thought"]);i!=null&&s(t,["thought"],i);const a=r(e,["inlineData"]);a!=null&&s(t,["inlineData"],yf(o,a));const l=r(e,["fileData"]);l!=null&&s(t,["fileData"],vf(o,l));const u=r(e,["thoughtSignature"]);u!=null&&s(t,["thoughtSignature"],u);const d=r(e,["codeExecutionResult"]);d!=null&&s(t,["codeExecutionResult"],d);const c=r(e,["executableCode"]);c!=null&&s(t,["executableCode"],c);const f=r(e,["functionCall"]);f!=null&&s(t,["functionCall"],f);const p=r(e,["functionResponse"]);p!=null&&s(t,["functionResponse"],p);const m=r(e,["text"]);return m!=null&&s(t,["text"],m),t}function Cf(o,e){const t={},n=r(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Tf(o,l))),s(t,["parts"],a)}const i=r(e,["role"]);return i!=null&&s(t,["role"],i),t}function _f(o,e){const t={},n=r(e,["behavior"]);n!=null&&s(t,["behavior"],n);const i=r(e,["description"]);i!=null&&s(t,["description"],i);const a=r(e,["name"]);a!=null&&s(t,["name"],a);const l=r(e,["parameters"]);l!=null&&s(t,["parameters"],l);const u=r(e,["response"]);return u!=null&&s(t,["response"],u),t}function Ef(o,e){const t={},n=r(e,["startTime"]);n!=null&&s(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&s(t,["endTime"],i),t}function Sf(o,e){const t={},n=r(e,["timeRangeFilter"]);return n!=null&&s(t,["timeRangeFilter"],Ef(o,n)),t}function xf(o,e){const t={},n=r(e,["mode"]);n!=null&&s(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&s(t,["dynamicThreshold"],i),t}function Af(o,e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&s(t,["dynamicRetrievalConfig"],xf(o,n)),t}function If(){return{}}function Mf(o,e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>_f(o,c))),s(t,["functionDeclarations"],d)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&s(t,["googleSearch"],Sf(o,i));const a=r(e,["googleSearchRetrieval"]);if(a!=null&&s(t,["googleSearchRetrieval"],Af(o,a)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&s(t,["urlContext"],If());const u=r(e,["codeExecution"]);return u!=null&&s(t,["codeExecution"],u),t}function wf(o,e){const t={},n=r(e,["handle"]);if(n!=null&&s(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function so(){return{}}function Rf(o,e){const t={},n=r(e,["disabled"]);n!=null&&s(t,["disabled"],n);const i=r(e,["startOfSpeechSensitivity"]);i!=null&&s(t,["startOfSpeechSensitivity"],i);const a=r(e,["endOfSpeechSensitivity"]);a!=null&&s(t,["endOfSpeechSensitivity"],a);const l=r(e,["prefixPaddingMs"]);l!=null&&s(t,["prefixPaddingMs"],l);const u=r(e,["silenceDurationMs"]);return u!=null&&s(t,["silenceDurationMs"],u),t}function Pf(o,e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&s(t,["automaticActivityDetection"],Rf(o,n));const i=r(e,["activityHandling"]);i!=null&&s(t,["activityHandling"],i);const a=r(e,["turnCoverage"]);return a!=null&&s(t,["turnCoverage"],a),t}function Nf(o,e){const t={},n=r(e,["targetTokens"]);return n!=null&&s(t,["targetTokens"],n),t}function kf(o,e){const t={},n=r(e,["triggerTokens"]);n!=null&&s(t,["triggerTokens"],n);const i=r(e,["slidingWindow"]);return i!=null&&s(t,["slidingWindow"],Nf(o,i)),t}function Df(o,e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&s(t,["proactiveAudio"],n),t}function Vf(o,e,t){const n={},i=r(e,["generationConfig"]);t!==void 0&&i!=null&&s(t,["setup","generationConfig"],i);const a=r(e,["responseModalities"]);t!==void 0&&a!=null&&s(t,["setup","generationConfig","responseModalities"],a);const l=r(e,["temperature"]);t!==void 0&&l!=null&&s(t,["setup","generationConfig","temperature"],l);const u=r(e,["topP"]);t!==void 0&&u!=null&&s(t,["setup","generationConfig","topP"],u);const d=r(e,["topK"]);t!==void 0&&d!=null&&s(t,["setup","generationConfig","topK"],d);const c=r(e,["maxOutputTokens"]);t!==void 0&&c!=null&&s(t,["setup","generationConfig","maxOutputTokens"],c);const f=r(e,["mediaResolution"]);t!==void 0&&f!=null&&s(t,["setup","generationConfig","mediaResolution"],f);const p=r(e,["seed"]);t!==void 0&&p!=null&&s(t,["setup","generationConfig","seed"],p);const m=r(e,["speechConfig"]);t!==void 0&&m!=null&&s(t,["setup","generationConfig","speechConfig"],hf(o,Ft(o,m)));const h=r(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&s(t,["setup","generationConfig","enableAffectiveDialog"],h);const g=r(e,["systemInstruction"]);t!==void 0&&g!=null&&s(t,["setup","systemInstruction"],Cf(o,O(o,g)));const y=r(e,["tools"]);if(t!==void 0&&y!=null){let L=ze(o,y);Array.isArray(L)&&(L=L.map(G=>Mf(o,Ke(o,G)))),s(t,["setup","tools"],L)}const _=r(e,["sessionResumption"]);t!==void 0&&_!=null&&s(t,["setup","sessionResumption"],wf(o,_));const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&s(t,["setup","inputAudioTranscription"],so());const x=r(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&s(t,["setup","outputAudioTranscription"],so());const R=r(e,["realtimeInputConfig"]);t!==void 0&&R!=null&&s(t,["setup","realtimeInputConfig"],Pf(o,R));const D=r(e,["contextWindowCompression"]);t!==void 0&&D!=null&&s(t,["setup","contextWindowCompression"],kf(o,D));const V=r(e,["proactivity"]);return t!==void 0&&V!=null&&s(t,["setup","proactivity"],Df(o,V)),n}function Lf(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["setup","model"],q(o,n));const i=r(e,["config"]);return i!=null&&s(t,["config"],Vf(o,i,t)),t}function Ff(o,e,t){const n={},i=r(e,["expireTime"]);t!==void 0&&i!=null&&s(t,["expireTime"],i);const a=r(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&s(t,["newSessionExpireTime"],a);const l=r(e,["uses"]);t!==void 0&&l!=null&&s(t,["uses"],l);const u=r(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&s(t,["bidiGenerateContentSetup"],Lf(o,u));const d=r(e,["lockAdditionalFields"]);return t!==void 0&&d!=null&&s(t,["fieldMask"],d),n}function Uf(o,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],Ff(o,n,t)),t}function Gf(o,e){const t={},n=r(e,["name"]);return n!=null&&s(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bf(o){const e=[];for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const n=o[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const i=Object.keys(n).map(a=>`${t}.${a}`);e.push(...i)}else e.push(t)}return e.join(",")}function qf(o,e){let t=null;const n=o.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(o.bidiGenerateContentSetup=a,t=a):delete o.bidiGenerateContentSetup}else n!==void 0&&delete o.bidiGenerateContentSetup;const i=o.fieldMask;if(t){const a=bf(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?o.fieldMask=a:delete o.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(c=>l.includes(c)?`generationConfig.${c}`:c));const d=[];a&&d.push(a),u.length>0&&d.push(...u),d.length>0?o.fieldMask=d.join(","):delete o.fieldMask}else delete o.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?o.fieldMask=i.join(","):delete o.fieldMask;return o}class Bf extends Re{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Uf(this.apiClient,e);a=I("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=qf(u,e.config);return i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),i.then(c=>Gf(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $f(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],n);const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function Hf(o,e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const a=r(e,["pageToken"]);t!==void 0&&a!=null&&s(t,["_query","pageToken"],a);const l=r(e,["filter"]);return t!==void 0&&l!=null&&s(t,["_query","filter"],l),n}function Jf(o,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],Hf(o,n,t)),t}function Of(o,e){const t={},n=r(e,["textInput"]);n!=null&&s(t,["textInput"],n);const i=r(e,["output"]);return i!=null&&s(t,["output"],i),t}function Zf(o,e){const t={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(e,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Of(o,a))),s(t,["examples","examples"],i)}return t}function Wf(o,e,t){const n={};if(r(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=r(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&s(t,["displayName"],i),r(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=r(e,["epochCount"]);t!==void 0&&a!=null&&s(t,["tuningTask","hyperparameters","epochCount"],a);const l=r(e,["learningRateMultiplier"]);if(l!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),r(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=r(e,["batchSize"]);t!==void 0&&u!=null&&s(t,["tuningTask","hyperparameters","batchSize"],u);const d=r(e,["learningRate"]);return t!==void 0&&d!=null&&s(t,["tuningTask","hyperparameters","learningRate"],d),n}function Yf(o,e){const t={},n=r(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const i=r(e,["trainingDataset"]);i!=null&&s(t,["tuningTask","trainingData"],Zf(o,i));const a=r(e,["config"]);return a!=null&&s(t,["config"],Wf(o,a,t)),t}function Kf(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["_url","name"],n);const i=r(e,["config"]);return i!=null&&s(t,["config"],i),t}function zf(o,e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&s(t,["_query","pageSize"],i);const a=r(e,["pageToken"]);t!==void 0&&a!=null&&s(t,["_query","pageToken"],a);const l=r(e,["filter"]);return t!==void 0&&l!=null&&s(t,["_query","filter"],l),n}function Xf(o,e){const t={},n=r(e,["config"]);return n!=null&&s(t,["config"],zf(o,n,t)),t}function Qf(o,e,t){const n={},i=r(e,["gcsUri"]);if(t!==void 0&&i!=null&&s(t,["supervisedTuningSpec","trainingDatasetUri"],i),r(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function jf(o,e){const t={},n=r(e,["gcsUri"]);return n!=null&&s(t,["validationDatasetUri"],n),t}function ep(o,e,t){const n={},i=r(e,["validationDataset"]);t!==void 0&&i!=null&&s(t,["supervisedTuningSpec"],jf(o,i));const a=r(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&s(t,["tunedModelDisplayName"],a);const l=r(e,["description"]);t!==void 0&&l!=null&&s(t,["description"],l);const u=r(e,["epochCount"]);t!==void 0&&u!=null&&s(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const d=r(e,["learningRateMultiplier"]);t!==void 0&&d!=null&&s(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const c=r(e,["exportLastCheckpointOnly"]);t!==void 0&&c!=null&&s(t,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=r(e,["adapterSize"]);if(t!==void 0&&f!=null&&s(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),r(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function tp(o,e){const t={},n=r(e,["baseModel"]);n!=null&&s(t,["baseModel"],n);const i=r(e,["trainingDataset"]);i!=null&&s(t,["supervisedTuningSpec","trainingDatasetUri"],Qf(o,i,t));const a=r(e,["config"]);return a!=null&&s(t,["config"],ep(o,a,t)),t}function np(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["model"],n);const i=r(e,["name"]);return i!=null&&s(t,["endpoint"],i),t}function Ho(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["state"]);i!=null&&s(t,["state"],Ao(o,i));const a=r(e,["createTime"]);a!=null&&s(t,["createTime"],a);const l=r(e,["tuningTask","startTime"]);l!=null&&s(t,["startTime"],l);const u=r(e,["tuningTask","completeTime"]);u!=null&&s(t,["endTime"],u);const d=r(e,["updateTime"]);d!=null&&s(t,["updateTime"],d);const c=r(e,["description"]);c!=null&&s(t,["description"],c);const f=r(e,["baseModel"]);f!=null&&s(t,["baseModel"],f);const p=r(e,["_self"]);p!=null&&s(t,["tunedModel"],np(o,p));const m=r(e,["distillationSpec"]);m!=null&&s(t,["distillationSpec"],m);const h=r(e,["experiment"]);h!=null&&s(t,["experiment"],h);const g=r(e,["labels"]);g!=null&&s(t,["labels"],g);const y=r(e,["pipelineJob"]);y!=null&&s(t,["pipelineJob"],y);const _=r(e,["serviceAccount"]);_!=null&&s(t,["serviceAccount"],_);const E=r(e,["tunedModelDisplayName"]);return E!=null&&s(t,["tunedModelDisplayName"],E),t}function op(o,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=r(e,["tunedModels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Ho(o,l))),s(t,["tuningJobs"],a)}return t}function ip(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["metadata"]);i!=null&&s(t,["metadata"],i);const a=r(e,["done"]);a!=null&&s(t,["done"],a);const l=r(e,["error"]);return l!=null&&s(t,["error"],l),t}function rp(o,e){const t={},n=r(e,["checkpointId"]);n!=null&&s(t,["checkpointId"],n);const i=r(e,["epoch"]);i!=null&&s(t,["epoch"],i);const a=r(e,["step"]);a!=null&&s(t,["step"],a);const l=r(e,["endpoint"]);return l!=null&&s(t,["endpoint"],l),t}function sp(o,e){const t={},n=r(e,["model"]);n!=null&&s(t,["model"],n);const i=r(e,["endpoint"]);i!=null&&s(t,["endpoint"],i);const a=r(e,["checkpoints"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>rp(o,u))),s(t,["checkpoints"],l)}return t}function Vt(o,e){const t={},n=r(e,["name"]);n!=null&&s(t,["name"],n);const i=r(e,["state"]);i!=null&&s(t,["state"],Ao(o,i));const a=r(e,["createTime"]);a!=null&&s(t,["createTime"],a);const l=r(e,["startTime"]);l!=null&&s(t,["startTime"],l);const u=r(e,["endTime"]);u!=null&&s(t,["endTime"],u);const d=r(e,["updateTime"]);d!=null&&s(t,["updateTime"],d);const c=r(e,["error"]);c!=null&&s(t,["error"],c);const f=r(e,["description"]);f!=null&&s(t,["description"],f);const p=r(e,["baseModel"]);p!=null&&s(t,["baseModel"],p);const m=r(e,["tunedModel"]);m!=null&&s(t,["tunedModel"],sp(o,m));const h=r(e,["supervisedTuningSpec"]);h!=null&&s(t,["supervisedTuningSpec"],h);const g=r(e,["tuningDataStats"]);g!=null&&s(t,["tuningDataStats"],g);const y=r(e,["encryptionSpec"]);y!=null&&s(t,["encryptionSpec"],y);const _=r(e,["partnerModelTuningSpec"]);_!=null&&s(t,["partnerModelTuningSpec"],_);const E=r(e,["distillationSpec"]);E!=null&&s(t,["distillationSpec"],E);const x=r(e,["experiment"]);x!=null&&s(t,["experiment"],x);const R=r(e,["labels"]);R!=null&&s(t,["labels"],R);const D=r(e,["pipelineJob"]);D!=null&&s(t,["pipelineJob"],D);const V=r(e,["serviceAccount"]);V!=null&&s(t,["serviceAccount"],V);const L=r(e,["tunedModelDisplayName"]);return L!=null&&s(t,["tunedModelDisplayName"],L),t}function ap(o,e){const t={},n=r(e,["nextPageToken"]);n!=null&&s(t,["nextPageToken"],n);const i=r(e,["tuningJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Vt(o,l))),s(t,["tuningJobs"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lp extends Re{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new ht(Me.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let i="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?i=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(i=n.name.split("/operations/")[0]),{name:i,state:At.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Kf(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>Vt(this.apiClient,f))}else{const c=$f(this.apiClient,e);return u=I("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Ho(this.apiClient,f))}}async listInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Xf(this.apiClient,e);return u=I("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=ap(this.apiClient,f),m=new Ln;return Object.assign(m,p),m})}else{const c=Jf(this.apiClient,e);return u=I("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=op(this.apiClient,f),m=new Ln;return Object.assign(m,p),m})}}async tuneInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=tp(this.apiClient,e);return a=I("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>Vt(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Yf(this.apiClient,e);return a=I("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>ip(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class up{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const cp=1024*1024*8,dp=3,fp=1e3,pp=2,Ct="x-goog-upload-status";async function mp(o,e,t){var n,i,a;let l=0,u=0,d=new It(new Response),c="upload";for(l=o.size;u<l;){const p=Math.min(cp,l-u),m=o.slice(u,u+p);u+p>=l&&(c+=", finalize");let h=0,g=fp;for(;h<dp&&(d=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((n=d==null?void 0:d.headers)===null||n===void 0)&&n[Ct]));)h++,await gp(g),g=g*pp;if(u+=p,((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i[Ct])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((a=d==null?void 0:d.headers)===null||a===void 0?void 0:a[Ct])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function hp(o){return{size:o.size,type:o.type}}function gp(o){return new Promise(e=>setTimeout(e,o))}class yp{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mp(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hp(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vp{create(e,t,n){return new Tp(e,t,n)}}class Tp{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ao="x-goog-api-key";class Cp{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ao)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ao,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _p="gl-node/";class Ep{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=Ir(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const i=new Cp(this.apiKey);this.apiClient=new Fd({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:_p+"web",uploader:new yp,downloader:new up}),this.models=new jd(this.apiClient),this.live=new Yd(this.apiClient,i,new vp),this.chats=new Qs(this.models,this.apiClient),this.caches=new Ks(this.apiClient),this.files=new da(this.apiClient),this.operations=new df(this.apiClient),this.authTokens=new Bf(this.apiClient),this.tunings=new lp(this.apiClient)}}const Sp={keywordextractor:`
You are an expert in resume optimization for ATS (Applicant Tracking System).

Your task:
1. Analyze the job description provided.
2. Extract only the most important **hard skills** and **keywords**.
3. Categorize them into exactly 3 arrays inside an object:
   - "hard": Technical or advanced skills (e.g., programming languages, tools, certifications).
   - "mid": Intermediate-level skills that are important but not highly specialized.
   - "easy": Basic or soft skills expected in most roles.

Output:
Return ONLY a valid **raw JavaScript object** in the format below — no formatting, no code blocks, no Markdown, no titles, no explanations.

{
  "hard": [],
  "mid": [],
  "easy": []
}

Job Description:
"""
{jobDescription}
"""
`,summary:`
You are an ATS-focused resume editor.

Task:
1. Rewrite the following resume summary in clear, professional English.
2. Inject relevant keywords from the job description naturally.
3. Keep it concise: 2–3 short sentences max.
4. Translate any other language to English.
5. Output ONLY the improved summary—no titles, no bullet points, no extra text.

Candidate Summary:
"""
{text}
"""

Job Description:
"""
{jobDescription}
"""
`,projectdetails:`
You are an expert resume editor focused on ATS optimization.

Your task:
1. Rewrite the following work experience in professional English.
2. Fix grammar and clarity issues.
3. Inject keywords naturally from the job description.

5. No headings, no explanations — just the improved content.

Work Experience:
"""
{text}
"""

Job Description:
"""
{jobDescription}
"""
`,skills:`
You are an ATS-focused resume editor specializing in skills sections.

Task:
1. Review the following skills list.
2. Align the skills with the job description requirements.
3. Prioritize the most relevant skills for the position.
4. Suggest any missing critical skills from the job description.
5. Translate any other language to English.
6. Output ONLY the improved skills list—no titles, no extra text.

skills:
"""
{text}
"""

Job Description:
"""
{jobDescription}
"""
`},xp=new Ep({apiKey:"AIzaSyB-h9QngTKovluX6JFCbQwS1vJPIW_pOPY"});async function Ap(o){const{TostError:e}=lo(),{Text:t,handleImprove:n,contentType:i,setKeywords:a}=o,l=localStorage.getItem("jobDescription"),d=Sp[i].replace("{text}",t||"").replace("{jobDescription}",l||"");try{const c=await xp.models.generateContent({model:"gemini-2.0-flash",contents:d}),f=c==null?void 0:c.text;if(n&&n(f),a){const p=f.trim().replace(/```(?:json|javascript)?\n?([\s\S]*?)\n?```/,"$1");try{const m=JSON.parse(p);if(m){a(m);const h=JSON.stringify(m);localStorage.setItem("keywords",h)}}catch(m){e("Failed to parse keywords JSON"),console.error("Failed to parse keywords JSON:",m,p)}}return f}catch(c){throw e("Error calling Ai"),console.error("Error calling Ai: ",c),c}}const Ip=()=>{const{TostSuccess:o,TostError:e}=lo(),t=Wo(),{mutate:n,isPending:i}=Yo({mutationKey:["Ai"],mutationFn:({Text:a,handleImprove:l,contentType:u,setKeywords:d})=>Ap({Text:a,handleImprove:l,contentType:u,setKeywords:d}),onSuccess:()=>{o("we get keywords from job description successfully "),t.invalidateQueries(["Ai"])},onError:()=>{e("Something went wrong")}});return{AiFunction:n,isPending:i}};function Mp({inputValue:o,onUpdateValues:e,contentType:t,filedName:n}){var g,y,_;const[i,a]=pe.useState(""),{AiFunction:l,isPending:u}=Ip(),d=E=>{e(E.target.value),a(E.target.value)},c=E=>{e(E)},f=JSON.parse(localStorage.getItem("keywords")),p=(g=f==null?void 0:f.hard)==null?void 0:g.map((E,x)=>M.jsx("li",{children:M.jsx(vt,{className:"bg-red-500 text-white text-center whitespace-pre-wrap p-2 text-sm font-bold rounded",children:E})},`hard-${x}`)),m=(y=f==null?void 0:f.mid)==null?void 0:y.map((E,x)=>M.jsx("li",{children:M.jsx(vt,{className:"bg-blue-500 text-white text-center whitespace-pre-wrap p-2 text-sm font-bold rounded",children:E})},`mid-${x}`)),h=(_=f==null?void 0:f.easy)==null?void 0:_.map((E,x)=>M.jsx("li",{children:M.jsx(vt,{className:"bg-green-700 text-white text-center whitespace-pre-wrap p-2 text-sm font-bold rounded",children:E})},`easy-${x}`));return M.jsxs(ai,{children:[M.jsx(li,{asChild:!0,children:M.jsxs(nt,{type:"button",className:"p-1 w-full",children:["Generate ",n," Based on Job Description ✨"]})}),M.jsxs(di,{children:[M.jsxs(fi,{children:[M.jsx(pi,{children:"Generate an Optimized Summary"}),M.jsx(Jt,{children:"We will use AI to create a professional summary tailored to the job description you provided. This helps highlight your relevant skills and improve your chances with recruiters and applicant tracking systems (ATS)."}),M.jsx(oi,{placeholder:"Type your job description",value:o,onChange:d}),M.jsx(nt,{asChild:!0,disabled:u,size:"sm",className:"p-2",onClick:()=>l({Text:i,handleImprove:c,contentType:t}),children:M.jsx("p",{className:"text-xs md:text-sm text-wrap",children:u?M.jsx(si,{}):"Generate Summary"})}),M.jsx("p",{className:"text-xs md:text-sm text-wrap",children:"Note"}),M.jsx(Jt,{className:"text-xs md:text-sm text-wrap",children:"These keywords were extracted from job descriptions. To improve your ATS score, include only the ones you've actually used or worked with. Add them naturally in your resume—in the skills section, your job descriptions, or your summary—to match what recruiters and ATS systems are looking for"})]}),M.jsxs("ul",{className:"flex items-center px-5 gap-2 flex-wrap max-h-[calc(50vh-110px)] overflow-y-auto",children:[p,m,h]})]})]})}const wp=o=>{const{onSubmit:e,onLiveUpdate:t,inputs:n,ShowAiButton:i,title:a,isLoading:l,showSaveBtn:u,className:d,defaultValues:c,isEditing:f,onCreate:p}=o,{register:m,handleSubmit:h,formState:{errors:g},watch:y,reset:_,setValue:E}=ii({mode:"onBlur"}),x=Number(localStorage.getItem("steps")),R=y("summary"),D=y("projectdetails"),V=y("skills"),[L,G]=pe.useState("");pe.useEffect(()=>{x===1?G("summary"):x===2?G("projectdetails"):x===4&&G("skills")},[x]);const H=()=>{switch(x){case 1:return R;case 2:return D;case 4:return V;default:return"No data available"}};return pe.useEffect(()=>{(f&&c||p)&&_(c)},[f,c]),pe.useEffect(()=>{const P=y(F=>{t&&t(F)});return()=>P.unsubscribe()},[t,y]),M.jsx("div",{className:d,children:M.jsxs("form",{onSubmit:h(e),className:"w-full space-y-3",children:[M.jsx("div",{className:"flex justify-between",children:M.jsx("h1",{className:"text-2xl font-bold",children:a})}),M.jsx("ul",{className:"space-y-3",children:n==null?void 0:n.map((P,F)=>pe.createElement(ri,{...P,register:m,errors:g,key:F}))}),M.jsx("div",{className:"flex  mt-3 gap-3  flex-col lg:flex-row xl:flex-row mb-3 w-full ",children:M.jsxs("ul",{className:"w-full space-y-3",children:[M.jsx("li",{children:u&&f?M.jsx(nt,{className:"btn btn-primary w-full",type:"submit",disabled:l,children:l?M.jsx(Ht,{className:"animate-spin"}):" update"}):M.jsx(nt,{className:"btn btn-primary  w-full  ",type:"submit",disabled:l,children:l?M.jsx(Ht,{className:"animate-spin"}):"Save"})}),M.jsx("li",{children:i&&M.jsx(Mp,{inputValue:H(),contentType:L,filedName:L,onUpdateValues:P=>{E(L,P)}})})]})})]})})},kp=pe.memo(wp);export{kp as F,Ip as u};
