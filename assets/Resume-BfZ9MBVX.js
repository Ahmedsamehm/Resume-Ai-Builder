import{r as h,T as L,f as V,i as v,g as J,e as $,C as S,j as e,B as g,k,u as H}from"./index-DB_8zrqn.js";import{F as P,u as K}from"./Form-D-1WpEjn.js";import{L as G}from"./Loading-EoMBAaDS.js";import{c as Y}from"./index-CKuLsy5e.js";import{D as _}from"./dotsStylingBody-nZFIPOaT.js";const B=({ApiGetFunction:c})=>{const[l,d]=h.useState(!1),[t,a]=h.useState(!0),[n,i]=h.useState(null),[s,r]=h.useState(null),[m,o]=h.useState({});return h.useEffect(()=>{if(l&&s!==null&&c){const p=c[s];p&&(o(p),a(!1))}else o({}),a(!0)},[l,s,c,t]),{handleEditClick:(p,y)=>{d(!0),a(!1),r(y),i(p==null?void 0:p.id),o(p)},handleCancelEdit:()=>{d(!1),a(!0),i(null),r(null),o({})},isEditing:l,currentId:n,selectedIndex:s,formValues:m,onCreate:t}},W=({handleCancelEdit:c,ApiDeleteFunction:l,currentId:d})=>{const[t,a]=h.useState(null);return{handleDelete:i=>{a(i),l(i).finally(()=>{a(null),d===i&&c()})},deletingId:t}},O=({isEditing:c,currentId:l,handleCancelEdit:d,AddFunction:t,updateFunction:a,id:n})=>({handleSubmit:async s=>{const{TostError:r}=L();try{c&&l?(a({formData:s,currentId:l}),d()):t({formData:s,id:n})}catch(m){console.error("Error handling submit :",m),r("Error handling submit")}}}),T=({isEditing:c,selectedIndex:l,ApiGetFunction:d,onLiveUpdate:t})=>({handleLiveUpdate:n=>{if(n)if(c&&d&&l!==null){const i={...d[l],...n};t(i)}else t(n)}}),M=({MsgSuccess:c,MsgError:l,FunctionCallApi:d,mutationKey:t})=>{const{TostSuccess:a,TostError:n}=L(),i=V(),{id:s}=v(),{mutate:r,isPending:m}=J({mutationKey:[t],mutationFn:({formData:o,id:j})=>d({formData:o,id:j}),onSuccess:o=>(a(c),i.invalidateQueries([t,s]),o),onError:()=>{n(l)}});return{addMutation:r,isPending:m}},I=({MsgSuccess:c,MsgError:l,FunctionCallApi:d,mutationKey:t})=>{const{id:a}=v(),{TostSuccess:n,TostError:i}=L(),s=V(),{mutate:r,isPending:m}=J({mutationKey:[t,a],mutationFn:({formData:o,currentId:j})=>d({formData:o,currentId:j}),onSuccess:o=>(n(c),s.invalidateQueries([t,a]),o),onError:()=>{i(l)}});return{updateMutation:r,isPending:m}},q=({MsgSuccess:c,MsgError:l,FunctionCallApi:d,mutationKey:t})=>{const{TostSuccess:a,TostError:n}=L(),i=V(),{id:s}=v(),{mutate:r,isPending:m}=J({mutationKey:[t],mutationFn:o=>d(o),onSuccess:o=>(a(c),i.invalidateQueries([t,s]),o),onError:()=>{n(l)}});return{deleteMutation:r,isPending:m}},C=c=>{const{MsgError:l,FunctionCallApi:d,queryKey:t}=c,{TostError:a}=L(),{id:n}=v(),{data:i,isPending:s}=$({queryKey:[t,n],queryFn:()=>d(n),staleTime:5*60*1e3,staleTimeUpdateMs:5*60*1e3,onError:r=>{a(l||"Error fetching data"),console.error("Error in useFetchedPersonalInfo:",r.message)}});return{data:i,isPending:s}},X=()=>({inputs:[{name:"jobtitle",label:"Job Title",type:"text",placeholder:"Enter your job title"},{name:"company",label:"Company",type:"text",placeholder:"Enter your company"},{name:"location",label:"Location",type:"text",placeholder:"Enter your location"},{name:"projectdetails",label:"Project Details",type:"text",placeholder:"Enter your project details"},{name:"duration",label:"Duration",type:"text",placeholder:"Enter your duration"}]});function Z({onLiveUpdate:c}){const{inputs:l}=X(),{fetchingExperienceObj:d,addExperienceObj:t,updateExperienceObj:a,deleteExperienceObj:n}=S(),{id:i}=v(),{data:s}=C(d),{addMutation:r,isPending:m}=M(t),{updateMutation:o,isPending:j}=I(a),{deleteMutation:N,isPending:p}=q(n),{handleEditClick:y,handleCancelEdit:E,isEditing:x,currentId:b,selectedIndex:D,formValues:F,onCreate:A}=B({ApiGetFunction:s}),{handleDelete:R,deletingId:w}=W({handleCancelEdit:E,ApiDeleteFunction:N,currentId:b}),{handleSubmit:z}=O({isEditing:x,currentId:b,handleCancelEdit:E,AddFunction:r,updateFunction:o,id:i}),{handleLiveUpdate:U}=T({isEditing:x,selectedIndex:D,ApiGetFunction:s,onLiveUpdate:c});return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:x?"Edit Work Experience":"Add Work Experience",inputs:l,isLoading:x?j:m,onLiveUpdate:U,onSubmit:z,showSaveBtn:!0,defaultValues:F,isEditing:x,className:"p-5 flex justify-center items-center",ShowAiButton:!0,Rest:!0,onCreate:A}),x&&e.jsx("div",{className:"flex justify-center mt-2 ",children:e.jsx(g,{variant:"outline",onClick:E,className:"mx-auto",children:"Cancel Editing"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Saved Experiences"}),(s==null?void 0:s.length)===0&&e.jsx("p",{className:"text-gray-500 text-center",children:"No experiences added yet."}),e.jsx("ul",{children:s==null?void 0:s.map((f,u)=>e.jsx("li",{className:`mb-2 p-3 border rounded-md ${b===f.id?"border-blue-500 ":"border-gray-200"}`,children:e.jsxs("div",{className:"flex justify-between items-center mx-auto",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium",children:f.jobtitle})," at"," ",e.jsx("span",{className:"italic",children:f.company}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[f.location," â€¢ ",f.duration]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(g,{size:"sm",onClick:()=>y(f,u),variant:"outline",disabled:x&&b!==f.id,children:"Edit"}),e.jsx(g,{size:"sm",onClick:()=>R(f.id),variant:"destructive",disabled:w===f.id&&p,children:w===f.id&&p?"Deleting...":"Delete"})]})]})},f.id||u))})]})]})}const ee=()=>({inputs:[{name:"university",label:"University",type:"text",placeholder:"Enter your university"},{name:"degree",label:"Degree",type:"text",placeholder:"Enter your degree"},{name:"graduationyear",label:"Graduation Year",type:"text",placeholder:"Enter your graduation year"},{name:"location",label:"Location",type:"text",placeholder:"Enter your location"}]});function te({onLiveUpdate:c}){const{inputs:l}=ee(),{fetchingEducationObj:d,addEducationObj:t,updateEducationObj:a}=S(),{id:n}=v(),{data:i,isPending:s}=C(d),{handleEditClick:r,handleCancelEdit:m,isEditing:o,currentId:j,selectedIndex:N,onCreate:p,formValues:y}=B({ApiGetFunction:i}),{addMutation:E,isPending:x}=M(t),{updateMutation:b}=I(a),{handleSubmit:D}=O({isEditing:o,currentId:j,handleCancelEdit:m,AddFunction:E,updateFunction:b,id:n}),{handleLiveUpdate:F}=T({isEditing:o,selectedIndex:N,ApiGetFunction:i,onLiveUpdate:c});return e.jsxs(e.Fragment,{children:[e.jsx(P,{isLoading:x||s,inputs:l,onSubmit:D,title:o?"Edit Education":"Add Education",showSaveBtn:!0,onLiveUpdate:F,defaultValues:y,isEditing:o,className:"p-5 flex justify-center items-center",handleCancelEdit:m,ShowAiButton:!1,Rest:!0,onCreate:p}),o?e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(g,{variant:"outline",onClick:m,className:"mx-auto",children:"Cancel Editing"})}):i.length!==0&&e.jsx(g,{size:"lg",onClick:()=>r(i[0],0),variant:"outline",disabled:s,className:"mx-auto flex",children:"Edit"})]})}const se=c=>({inputs:[{name:"skill",label:c?"Update Skill":"Add Skill",type:"text",placeholder:"Enter your skill (e.g., React, JavaScript, UI Design)"}]});function ne({onLiveUpdate:c}){const{fetchingSkillsObj:l,addSkillsObj:d,updateSkillsObj:t,deleteSkillsObj:a}=S(),{id:n}=v(),{data:i,isPending:s}=C(l),{addMutation:r,isPending:m}=M(d),{updateMutation:o,isPending:j}=I(t),{deleteMutation:N,isPending:p}=q(a),{handleEditClick:y,handleCancelEdit:E,isEditing:x,currentId:b,selectedIndex:D,formValues:F,onCreate:A}=B({ApiGetFunction:i}),{handleSubmit:R}=O({isEditing:x,currentId:b,handleCancelEdit:E,AddFunction:r,updateFunction:o,id:n}),{handleLiveUpdate:w}=T({isEditing:x,selectedIndex:D,ApiGetFunction:i==null?void 0:i.skill,onLiveUpdate:c}),{handleDelete:z,deletingId:U}=W({handleCancelEdit:E,ApiDeleteFunction:N,currentId:b}),{inputs:f}=se(x);return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Skills"}),e.jsx("p",{className:"text-white mb-4",children:"Add skills that showcase your strengths and expertise."}),e.jsx(P,{inputs:f,title:x?"Update Skill":"Add Skill",onSubmit:R,isLoading:x?p:m||j,showSaveBtn:!0,defaultValues:F,isEditing:x,className:"border p-4 rounded-md ",ShowAiButton:!0,Rest:!0,onLiveUpdate:w,onCreate:A}),x&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(g,{variant:"outline",onClick:E,className:"mx-auto",children:"Cancel Editing"})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Your Skills"}),s?e.jsx("p",{className:"text-center text-gray-500",children:"Loading skills..."}):(i==null?void 0:i.length)===0?e.jsx("p",{className:"text-center text-gray-500",children:"No skills added yet. Add skills to enhance your resume."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:i==null?void 0:i.map((u,Q)=>e.jsxs("div",{className:`p-3 rounded-md border flex justify-between items-center ${b===(u==null?void 0:u.id)}`,children:[e.jsx("span",{className:"font-medium",children:u==null?void 0:u.skill}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(g,{size:"sm",variant:"outline",onClick:()=>y(u,Q),disabled:x&&b!==(u==null?void 0:u.id),children:"Edit"}),e.jsx(g,{size:"sm",variant:"destructive",onClick:()=>z(u==null?void 0:u.id),disabled:U===(u==null?void 0:u.id)&&p,children:U===(u==null?void 0:u.id)&&p?"Deleting...":"Delete"})]})]},u.id))})]})]})}function ae(){var i,s,r,m,o,j,N;const{resumeData:c,updateSection:l}=k(),{fetchingPersonalInfoObj:d}=S(),{data:t,isPending:a}=C(d),{personalInfo:n}=c;return h.useEffect(()=>{l("personalInfo",t)},[t]),a?e.jsx(G,{}):e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-6 border-b pb-4 mx-auto text-xs  ",children:[e.jsxs("div",{className:"flex justify-center flex-col text-center py-2 ",children:[e.jsx("h1",{className:"capitalize text-sm  ",children:(n==null?void 0:n.fullName)||((i=t==null?void 0:t[0])==null?void 0:i.fullName)||"John Doe"}),e.jsx("span",{children:(n==null?void 0:n.position)||((s=t==null?void 0:t[0])==null?void 0:s.position)||"Software Engineer"})]}),e.jsxs("ul",{className:"grid grid-cols-3 gap-4 text-center items-center justify-items-center",children:[e.jsx("li",{className:"justify-self-start",children:(n==null?void 0:n.email)||((r=t==null?void 0:t[0])==null?void 0:r.email)||"johndoe@example.com"}),e.jsxs("li",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-black",children:["(+20)",(n==null?void 0:n.phone)||((m=t==null?void 0:t[0])==null?void 0:m.phone)||"0123456789"]}),e.jsx("span",{className:"text-black",children:(n==null?void 0:n.address)||((o=t==null?void 0:t[0])==null?void 0:o.address)||"Cairo, Egypt"})]}),e.jsx("li",{className:"flex flex-col",children:e.jsx("a",{className:"text-chart-1",href:`${(n==null?void 0:n.linkedIn)||((j=t==null?void 0:t[0])==null?void 0:j.linkedIn)||"https://www.linkedin.com/"}`,target:"_blank",rel:"noopener noreferrer",children:"LinkedIn"})})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold border-b mb-2",children:"Summary"}),e.jsx("p",{className:"text-black text-base font-medium tracking-tighter align-middle",children:(n==null?void 0:n.summary)||((N=t==null?void 0:t[0])==null?void 0:N.summary)||"Lorem ipsum dolor sit amet consectetur adipisicing elit. Id non nam tenetur molestiae doloribus laboriosam placeat nemo! In, perspiciatis rerum?"})]})]})}function ie(){const{resumeData:c,updateSection:l}=k(),{fetchingExperienceObj:d}=S(),{data:t}=C(d),[a,n]=h.useState([]),{workExperience:i}=c;return h.useEffect(()=>{l("workExperience",t)},[t]),h.useEffect(()=>{if(i)if(i.id&&t){const s=t.map(r=>r.id===i.id?{...r,...i}:r);n(s)}else n([...t||[],i]);else t&&n(t)},[i,t]),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold border-b mb-2",children:"Work Experience"}),(a==null?void 0:a.length)===0&&e.jsx("p",{className:"text-gray-500 text-sm italic",children:"No work experience added yet."}),(a==null?void 0:a.length)===0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-medium",children:"Job Title at Company Location"}),e.jsx("p",{className:"text-black text-base font-medium tracking-tighter align-middle",children:e.jsx("span",{className:"font-medium",children:"Date"})})]}),e.jsx("p",{className:"text-black text-base font-medium tracking-tighter align-middle mt-1",children:"Project details will appear here"})]}),a==null?void 0:a.map((s,r)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between  ",children:[e.jsxs("ul",{className:"flex gap-1 text-black text-sm",children:[e.jsx("li",{children:s==null?void 0:s.jobtitle}),e.jsxs("li",{children:[" ",s==null?void 0:s.company]}),e.jsx("li",{children:s==null?void 0:s.location})]}),e.jsx("p",{className:"text-black text-base font-medium tracking-tighter align-middle",children:e.jsx("span",{className:"font-medium",children:s==null?void 0:s.duration})})]}),e.jsx("p",{className:"text-black text-base font-medium tracking-tighter align-middle mt-1",children:s==null?void 0:s.projectdetails})]},(s==null?void 0:s.id)||r))]})}function ce(){var n,i,s;const{resumeData:c,updateSection:l}=k(),{fetchingEducationObj:d}=S(),{data:t}=C(d),{education:a}=c;return console.log(t),h.useEffect(()=>{l("education",t)},[t]),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold border-b mb-2",children:"Education"}),e.jsx("h3",{className:"font-medium",children:(a==null?void 0:a.university)||((n=t==null?void 0:t[0])==null?void 0:n.university)||"Cairo University"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-medium",children:(a==null?void 0:a.degree)||((i=t==null?void 0:t[0])==null?void 0:i.degree)||"Bachelor"}),e.jsx("span",{className:"font-medium",children:(a==null?void 0:a.graduationyear)||((s=t==null?void 0:t[0])==null?void 0:s.graduationyear)||"2020"})]}),e.jsx("span",{children:(a==null?void 0:a.location)||(t==null?void 0:t[0].location)})]})}function le(){const{resumeData:c,updateSection:l}=k(),{Skills:d}=c,{fetchingSkillsObj:t}=S(),{data:a}=C(t),[n,i]=h.useState([]);return h.useEffect(()=>{l("Skills",a)},[a]),h.useEffect(()=>{const s=d==null?void 0:d.skill;return i(a||s)},[d,a]),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold border-b mb-2",children:"Skills"}),(n==null?void 0:n.length)===0&&e.jsx("p",{className:"text-gray-500 text-sm italic",children:"No skills added yet."}),e.jsx("ul",{className:"grid grid-cols-2",children:n==null?void 0:n.map((s,r)=>e.jsx("li",{className:"col-span-1 list-disc ml-5",children:s==null?void 0:s.skill},(s==null?void 0:s.id)||r))})]})}function de(){const{contentRef:c}=k();return e.jsx(e.Fragment,{children:e.jsxs("section",{ref:c,className:"min-h-screen mx-auto  bg-white shadow-md rounded-md p-2 md:p-5 text-sm md:text-base  text-gray-900 capitalize",children:[e.jsx(ae,{}),e.jsx(ie,{}),e.jsx(ce,{}),e.jsx(le,{})]})})}const re=()=>({inputs:[{name:"fullName",label:"Full Name",type:"text",placeholder:"Enter your full name"},{name:"position",label:"Position",type:"text",placeholder:"Enter your position"},{name:"phone",label:"phone",type:"tel",placeholder:"Enter your phone"},{name:"email",label:"Email",type:"email",placeholder:"Enter your email"},{name:"address",label:"Address",type:"text",placeholder:"Enter your address"},{name:"linkedIn",label:"LinkedIn",type:"text",placeholder:"Enter your LinkedIn profile"},{name:"summary",label:"Summary",type:"textarea",placeholder:"Write a short summary"}]}),oe=({onLiveUpdate:c})=>{const{id:l}=v(),{inputs:d}=re(),{fetchingPersonalInfoObj:t,updatePersonalInfoObj:a,addPersonalInfoObj:n}=S(),{data:i,isPending:s}=C(t),{updateMutation:r,isPending:m}=I(a),{addMutation:o,isPending:j}=M(n),{handleEditClick:N,handleCancelEdit:p,isEditing:y,currentId:E,selectedIndex:x,formValues:b,onCreate:D}=B({ApiGetFunction:i}),{handleSubmit:F}=O({isEditing:y,currentId:E,handleCancelEdit:p,AddFunction:o,updateFunction:r,id:l}),{handleLiveUpdate:A}=T({isEditing:y,selectedIndex:x,ApiGetFunction:i,onLiveUpdate:c});return e.jsxs("div",{className:"p-5 flex flex-col justify-center items-center",children:[e.jsx(P,{inputs:d,title:"Personal Information",onSubmit:F,isLoading:j||m,showSaveBtn:!0,onLiveUpdate:A,defaultValues:b,isEditing:y,className:"w-full",ShowAiButton:!0,Rest:!0,onCreate:D}),y?e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(g,{variant:"outline",onClick:p,className:"mx-auto",children:"Cancel Editing"})}):(i==null?void 0:i.length)!==0&&e.jsx(g,{size:"sm",onClick:()=>N(i[0],0),variant:"outline",disabled:s,children:"Edit"})]})},ue=h.memo(oe);function me(){const[c,l]=h.useState(""),[d,t]=h.useState(""),{AiFunction:a,isPending:n}=K(),i=r=>{l(r.target.value)};h.useEffect(()=>{c&&c!==""?localStorage.setItem("jobDescription",c):l(localStorage.getItem("jobDescription")||"")},[c]);const s=()=>{a({jobDescription:c,contentType:"keywordextractor",setKeywords:t})};return e.jsx("div",{children:e.jsxs("div",{className:"p-5",children:[e.jsx("span",{children:"Add job description"}),e.jsx(Y,{value:c,className:"mt-2",placeholder:"Type your job description",onChange:i}),e.jsx(g,{disabled:n,className:"mt-3",onClick:s,children:n?e.jsx(G,{}):"Save Job Description"})]})})}function he(){const[c,l]=h.useState(0),{updateSection:d}=k();h.useEffect(()=>{localStorage.setItem("steps",c)},[c]);const t=(s,r)=>{d(s,r)},a=()=>{l(c+1)},n=()=>{l(c-1)},i=()=>{switch(c){case 0:return e.jsx(me,{});case 1:return e.jsx(ue,{onLiveUpdate:s=>t("personalInfo",s)});case 2:return e.jsx(Z,{onLiveUpdate:s=>t("workExperience",s)});case 3:return e.jsx(te,{onLiveUpdate:s=>t("education",s)});case 4:return e.jsx(ne,{onLiveUpdate:s=>t("Skills",s)})}};return e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"col-span-2 lg:col-span-1 min-h-[calc(100vh-120px)]",children:[e.jsxs("div",{className:"flex justify-between gap-2  ",children:[e.jsx(g,{disabled:c===0,onClick:n,className:"capitalize",children:"back"}),e.jsx(g,{disabled:c===4,onClick:a,className:"capitalize",children:"next"})]}),i()]}),e.jsx("div",{className:"col-span-2 lg:col-span-1  min-h-[calc(100vh-120px)]",children:e.jsx(de,{})})]})]})}function fe(){const c=H(),{reactToPrintFn:l}=k(),d=()=>{c("/DashBoard"),localStorage.removeItem("keywords"),localStorage.removeItem("jobDescription"),localStorage.removeItem("steps")};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"flex  justify-between",children:[e.jsx("h1",{children:"Resume"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(g,{onClick:d,children:"Back"}),e.jsx(g,{onClick:l,children:"DownloadPdf"})]})]}),e.jsx("section",{className:"bg-accent",children:e.jsx(he,{})})]})}export{fe as default};
